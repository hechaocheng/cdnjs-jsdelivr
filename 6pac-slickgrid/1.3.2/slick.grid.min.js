"use strict";if("undefined"==typeof jQuery)throw new Error("SlickGrid requires jquery module to be loaded");if(!jQuery.rule)throw new Error("SlickGrid requires jquery.rule module to be loaded");if(!jQuery.fn.drag)throw new Error("SlickGrid requires jquery.event.drag module to be loaded");!function(e){function t(){var e=null;this.isActive=function(t){return t?e===t:null!==e},this.activate=function(t){if(t!==e){if(null!==e)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t}},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return!e||e.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!e||e.cancelCurrentEdit()}}var o;e.extend(!0,window,{Slick:{Grid:function(t,n,r,l){function a(){var t=e("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function s(e){e&&e.jquery&&(e.disableSelection?e.disableSelection():e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1}))}function d(){return re.length}function c(e){return re[e]}function u(){var t;for(t=0;t<r.length;t++){var i=r[t]=e.extend({},Me,r[t]);qe[i.id]=t;var o=e("<div class='ui-state-default slick-header-column' cell="+t+" id='"+i.id+"' />").html("<span class='slick-column-name'>"+i.name+"</span>").width(i.width-pe).attr("title",i.toolTip||i.name).appendTo(de);i.hidden&&o.css("display","none"),(l.enableColumnReorder||i.sortable)&&o.hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),i.sortable&&o.append("<span class='slick-sort-indicator' />")}f(),p(),l.enableColumnReorder&&m()}function h(e,t){de.children().removeClass("slick-header-column-sorted"),de.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),e&&(e.addClass("slick-header-column-sorted"),e.find(".slick-sort-indicator").addClass(t?"slick-sort-indicator-asc":"slick-sort-indicator-desc"))}function f(){de.click(function(t){if(!e(t.target).hasClass("slick-resizable-handle")){var i=e(t.target).closest(".slick-header-column");i.length&&r[qe[i.attr("id")]].sortable&&l.editorLock.commitCurrentEdit()&&(i.is(".slick-header-column-sorted")?i.find(".slick-sort-indicator").toggleClass("slick-sort-indicator-asc").toggleClass("slick-sort-indicator-desc"):h(i,!0),Se.onSort&&Se.onSort(r[qe[i.attr("id")]],i.find(".slick-sort-indicator").hasClass("slick-sort-indicator-asc")))}})}function v(){var e=de.sortable("toArray"),t={};for(i=0;i<r.length;i++)t[r[i].id]=r[i];for(i=0;i<e.length;i++)de.children()[i].setAttribute("cell",i),qe[e[i]]=i,r[i]=t[e[i]];H(),b(),C(),B()}function m(){de.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(t,i){e(i.helper).addClass("slick-header-column-active")},beforeStop:function(t,i){e(i.helper).removeClass("slick-header-column-active")},stop:function(t){l.editorLock.commitCurrentEdit()?(v(),Se.onColumnsReordered&&Se.onColumnsReordered(),t.stopPropagation(),p()):e(this).sortable("cancel")}})}function p(){var t,i,o,n,a,s,d,c,u,h;(a=de.find(".slick-header-column:visible")).find(".slick-resizable-handle").remove(),a.each(function(e,t){(o=r[t.getAttribute("cell")]).resizable&&(void 0===c&&(c=e),u=e)}),a.each(function(f,v){void 0!==c&&f<c||l.forceFitColumns&&f>=u||(t=e(v),e("<div class='slick-resizable-handle' />").appendTo(v).bind("dragstart",function(c){if(!l.editorLock.commitCurrentEdit())return!1;n=c.pageX,t.addClass("slick-header-column-active");var u=null,v=null;if(a.each(function(t,i){r[i.getAttribute("cell")].previousWidth=e(i).outerWidth()}),l.forceFitColumns)for(u=0,v=0,i=f+1;i<a.length;i++)(o=r[a[i].getAttribute("cell")]).resizable&&(null!==v&&(o.maxWidth?v+=o.maxWidth-o.previousWidth:v=null),u+=o.previousWidth-Math.max(o.minWidth||0,be));var m=0,p=0;for(i=0;i<=f;i++)(o=r[a[i].getAttribute("cell")]).resizable&&(null!==p&&(o.maxWidth?p+=o.maxWidth-o.previousWidth:p=null),m+=o.previousWidth-Math.max(o.minWidth||0,be));null===u&&(u=1e5),null===m&&(m=1e5),null===v&&(v=1e5),null===p&&(p=1e5),d=n+Math.min(u,p),s=n-Math.min(m,v),h=fe.width()}).bind("drag",function(e){var t,c,u,v=Math.min(d,Math.max(s,e.pageX))-n;if(v<0){for(c=v,i=f;i>=0;i--)u=a[i].getAttribute("cell"),(o=r[u]).resizable&&(t=Math.max(o.minWidth||0,be),c&&o.previousWidth+c<t?(c+=o.previousWidth-t,y(u,t,l.syncColumnCellResize)):(y(u,o.previousWidth+c,l.syncColumnCellResize),c=0));if(l.forceFitColumns)for(c=-v,i=f+1;i<a.length;i++)u=a[i].getAttribute("cell"),(o=r[u]).resizable&&(c&&o.maxWidth&&o.maxWidth-o.previousWidth<c?(c-=o.maxWidth-o.previousWidth,y(u,o.maxWidth,l.syncColumnCellResize)):(y(u,o.previousWidth+c,l.syncColumnCellResize),c=0));else l.syncColumnCellResize&&fe.width(h+v)}else{for(c=v,i=f;i>=0;i--)u=a[i].getAttribute("cell"),(o=r[u]).resizable&&(c&&o.maxWidth&&o.maxWidth-o.previousWidth<c?(c-=o.maxWidth-o.previousWidth,y(u,o.maxWidth,l.syncColumnCellResize)):(y(u,o.previousWidth+c,l.syncColumnCellResize),c=0));if(l.forceFitColumns)for(c=-v,i=f+1;i<a.length;i++)u=a[i].getAttribute("cell"),(o=r[u]).resizable&&(t=Math.max(o.minWidth||0,be),c&&o.previousWidth+c<t?(c+=o.previousWidth-t,y(u,t,l.syncColumnCellResize)):(y(u,o.previousWidth+c,l.syncColumnCellResize),c=0));else l.syncColumnCellResize&&fe.width(h+v)}}).bind("dragend",function(n){var s;for(t.removeClass("slick-header-column-active"),i=0;i<a.length;i++){var d=a[i].getAttribute("cell");o=r[d],s=e(a[i]).outerWidth(),o.previousWidth!==s&&o.rerenderOnResize&&H(),l.forceFitColumns?o.width=Math.floor(o.width*(s-o.previousWidth)/o.previousWidth)+o.width:o.width=s,l.syncColumnCellResize||y(d,s,!0)}S(),Se.onColumnsResized&&Se.onColumnsResized()}))})}function g(){fe.bind("beforedragstart",function(t){var i=e(t.target).closest(".slick-cell");if(0===i.length)return!1;if(parseInt(i.parent().attr("row"),10)>=le())return!1;var o=r[i.attr("cell")];return("move"===o.behavior||"selectAndMove"===o.behavior)&&void 0}).bind("dragstart",function(t){if(!l.editorLock.commitCurrentEdit())return!1;var i=parseInt(e(t.target).closest(".slick-row").attr("row"),10);je[i]||R([i]);var o=e("<div class='slick-reorder-proxy'/>");o.css("position","absolute").css("zIndex","99999").css("width",e(this).innerWidth()).css("height",l.rowHeight*Ne.length).appendTo(he),e(this).data("selectionProxy",o).data("insertBefore",-1);var n=e("<div class='slick-reorder-guide'/>");return n.css("position","absolute").css("zIndex","99998").css("width",e(this).innerWidth()).css("top",-1e3).appendTo(he),n}).bind("drag",function(t){var i=t.clientY-e(this).offset().top;e(this).data("selectionProxy").css("top",i-5);var o=Math.max(0,Math.min(Math.round(i/l.rowHeight),le()));o!==e(this).data("insertBefore")&&(Se.onBeforeMoveRows&&!1===Se.onBeforeMoveRows(x(),o)?e(t.dragProxy).css("top",-1e3).data("canMove",!1):e(t.dragProxy).css("top",o*l.rowHeight).data("canMove",!0),e(this).data("insertBefore",o))}).bind("dragend",function(t){var i=e(t.dragProxy).data("canMove");e(t.dragProxy).remove(),e(this).data("selectionProxy").remove();var o=e(this).data("insertBefore");e(this).removeData("selectionProxy").removeData("insertBefore"),Se.onMoveRows&&i&&Se.onMoveRows(x(),o)})}function w(){var t=e("<div class='ui-state-default slick-header-column' cell='' id='' style='visibility:hidden'>-</div>").appendTo(de);pe=t.outerWidth()-t.width(),ge=t.outerHeight()-t.height(),t.remove();var i=e("<div class='slick-row' />").appendTo(fe);t=e("<div class='slick-cell' cell='' id='' style='visibility:hidden'>-</div>").appendTo(i),we=t.outerWidth()-t.width(),Ce=t.outerHeight()-t.height(),i.remove(),be=Math.max(pe,we)}function C(){var t=e("<style type='text/css' rel='stylesheet' lib='slickgrid"+Le+"' />").appendTo(e("head")),i=l.rowHeight-Ce;e.rule("."+Le+" .slick-header-column { left: 10000px; }").appendTo(t),e.rule("."+Le+" .slick-header-columns-secondary {  height:"+l.secondaryHeaderRowHeight+"px; }").appendTo(t),e.rule("."+Le+" .slick-cell { height:"+i+"px; line-height:"+i+"px; }").appendTo(t);for(var o=0;o<r.length;o++)e.rule("."+Le+" .c"+o+" { width:"+((r[o].currentWidth||r[o].width)-we)+"px; display: "+(r[o].hidden?"none":"block")+" }").appendTo(t)}function b(){e("style[lib=slickgrid"+Le+"]").remove()}function k(){var e,t,i=[],n=[],a=0,s=l.autoHeight?me:me-o.width,d=0,c=0;for(e=0;e<r.length;e++)r[e].hidden||(t=r[e],n.push(t),i.push(t.width),c+=t.width,a+=t.width-Math.max(t.minWidth||0,be));for(d=c,H();d>s;){if(!a)return;var u=(d-s)/a;for(e=0;e<n.length&&d>s;e++)if((t=n[e]).resizable&&t.minWidth!==t.width&&t.width!==be){var h=Math.floor(u*(t.width-Math.max(t.minWidth||0,be)))||1;d-=h,i[e]-=h}}for(var f=d;d<s;){var v=s/d;for(e=0;e<n.length&&d<s;e++)if((t=n[e]).resizable&&!(t.maxWidth<=t.width)){var m=Math.min(Math.floor(v*t.width)-t.width,t.maxWidth-t.width||1e6)||1;d+=m,i[e]+=m}if(f==d)break;f=d}for(e=0;e<r.length;e++)if(r[e]===n[0]){var p=i.shift();n.shift().currentWidth=p,y(e,p,!0)}S()}function y(t,i,o){var n=r[t];n.currentWidth=i,de.find(".slick-header-column[id="+n.id+"]").css("width",i-pe),o&&e.rule("."+Le+" .c"+t,"style[lib=slickgrid"+Le+"]").css("width",i-we)}function x(){return Ne.concat()}function R(t){var i,o,n={};for(i=0;i<t.length;i++)n[t[i]]=!0;for(i=0;i<Ne.length;i++)o=Ne[i],Ie[o]&&!n[o]&&e(Ie[o]).removeClass("ui-state-active selected");for(i=0;i<t.length;i++)o=t[i],Ie[o]&&!je[o]&&e(Ie[o]).addClass("ui-state-active selected");Ne=t.concat(),je=n}function E(e,t){var i=ae(t),o="slick-row "+(t<le()&&!i?" loading":"")+(je[t]?" selected ui-state-active":"")+(t%2==1?" odd":" even");l.rowCssClasses&&(o+=" "+l.rowCssClasses(i)),e.push("<div class='ui-widget-content "+o+"' row='"+t+"' style='top:"+l.rowHeight*t+"px'>");for(var n=0,a=r.length;n<a;n++){var s=r[n];s.hidden||(e.push("<div "+(s.unselectable?"tabIndex=-1 ":"hideFocus tabIndex=0 ")+"class='slick-cell c"+n+(s.cssClass?" "+s.cssClass:"")+"' cell="+n+">"),i&&t<le()&&e.push(s.formatter(t,n,i[s.field],s,i)),e.push("</div>"))}e.push("</div>")}function M(e,t){for(var i in Ie)(i=parseInt(i,10))!==ke&&(i<e||i>t)&&W(i)}function H(){fe[0].innerHTML="",Ie={},Qe={},Ye+=De,De=0}function W(e){var t=Ie[e];t&&(t.parentNode.removeChild(t),delete Ie[e],delete Qe[e],De--,Ye++)}function T(e){var t,i,o;if(e&&e.length){Ve=0;var n=[];for(t=0,i=e.length;t<i;t++){if(ze&&ke===t)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";Ie[e[t]]&&n.push(e[t])}if(De>10&&n.length===De)H();else for(t=0,o=n.length;t<o;t++)W(n[t])}}function L(e){T([e])}function S(){var i=l.rowHeight*(le()+(l.enableAddRow?1:0)+(l.leaveSpaceForNewRows?Re-1:0));l.autoHeight?he.height(i):he.height(t.innerHeight()-se.outerHeight()-(l.showSecondaryHeaderRow?ce.outerHeight():0)),me=he.innerWidth(),ve=he.innerHeight(),Te=Re=Math.ceil(ve/l.rowHeight),He=Math.max(50,Re+2*Te);var n=0;de.find(".slick-header-column:visible").each(function(){n+=e(this).outerWidth()}),fe.width(n),i=Math.max(i,ve-o.height),he.scrollTop()>i-he.height()+o.height&&he.scrollTop(i-he.height()+o.height),fe.height(i),B()}function A(){l.forceFitColumns?k():S()}function z(){var e=l.enableAddRow?le():le()-1;for(var t in Ie)t>=e&&W(t);var i=Math.max(l.rowHeight*(le()+(l.enableAddRow?1:0)+(l.leaveSpaceForNewRows?Re-1:0)),ve-o.height);he.scrollTop()>i-he.height()+o.height&&he.scrollTop(i-he.height()+o.height),fe.height(i),l.autoHeight&&S()}function I(){return{top:Math.floor(Fe/l.rowHeight),bottom:Math.floor((Fe+ve)/l.rowHeight)}}function D(t,i){var o,n,r=fe[0],l=De,a=[],s=[],d=new Date,c=!1;for(o=t;o<=i;o++)Ie[o]||(De++,s.push(o),E(a,o),Ae&&ke===o&&(c=!0),Xe++);var u=document.createElement("div");for(u.innerHTML=a.join(""),o=0,n=u.childNodes.length;o<n;o++)Ie[s[o]]=r.appendChild(u.firstChild);c&&Q(Ae=e(Ie[ke]).find(".slick-cell[cell="+ye+"]")[0],!1,!1),De-l>We&&(Ge=(new Date-d)/(De-l))}function P(){l.enableAsyncPostRender&&(clearTimeout(Je),Je=setTimeout(G,l.asyncPostRenderDelay,"JavaScript"))}function F(e){delete Qe[e],Ue=Math.min(Ue,e),Oe=Math.max(Oe,e),P()}function B(){var e=I(),t=Math.max(0,e.top-(Ve>=0?We:Te)),i=Math.min(l.enableAddRow?le():le()-1,e.bottom+(Ve>0?Te:We));De>10&&Math.abs(Pe-Fe)>l.rowHeight*He?H():M(t,i),D(t,i),Ue=Math.max(0,e.top-We),Oe=Math.min(l.enableAddRow?le():le()-1,e.bottom+We),P(),Pe=Fe,_e=null}function V(){Fe=he[0].scrollTop;var e=Math.abs(Pe-Fe),t=he[0].scrollLeft;t!==Be&&(se[0].scrollLeft=Be=t,ce[0].scrollLeft=Be=t),e<Math.min(ve/4,We*l.rowHeight)||(Ve=Pe===Fe?0:Pe<Fe?1:-1,_e&&clearTimeout(_e),e<Re*l.rowHeight?B():_e=setTimeout(B,50,"JavaScript"),Se.onViewportChanged&&Se.onViewportChanged())}function G(){for(;Ue<=Oe;){var e=Ve>=0?Ue++:Oe--,t=Ie[e];if(!(!t||Qe[e]||e>=le())){for(var i=ae(e),o=t.childNodes,n=0,a=0,s=r.length;n<s;++n){var d=r[n];d.hidden||(d.asyncPostRender&&d.asyncPostRender(o[a],Ue,i,d),++a)}return Qe[e]=!0,void(Je=setTimeout(G,l.asyncPostRenderDelay,"JavaScript"))}}}function N(e){if(!Se.onKeyDown||!ae(ke)||l.editorLock.isActive()||!Se.onKeyDown(e,ke,ye))switch(e.which){case 27:if(!l.editorLock.isActive())return;l.editorLock.cancelCurrentEdit(),Ae&&Ae.focus();break;case 9:te(0,e.shiftKey?-1:1,!0);break;case 37:te(0,-1,!1);break;case 39:te(0,1,!1);break;case 38:te(-1,0,!1);break;case 40:te(1,0,!1);break;case 13:l.autoEdit?te(1,0,!1):l.editable&&(ze?ke===n.length?te(1,0,!1):l.editorLock.commitCurrentEdit()&&Ae.focus():l.editorLock.commitCurrentEdit()&&$());break;default:return}e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(e){}}function j(t){var i=e(t.target).closest(".slick-cell");if(0!==i.length&&(Ae!==i[0]||null===ze)){var o=parseInt(i.parent().attr("row"),10),a=parseInt(i.attr("cell"),10),s=null,d=r[a];if(ae(o)&&("selectAndMove"===d.behavior||"select"===d.behavior)&&(s=l.editorLock.commitCurrentEdit())){var c=x(),u=e.inArray(o,c);if(t.ctrlKey||t.shiftKey){if(-1===u&&t.ctrlKey)c.push(o);else if(-1!==u&&t.ctrlKey)c=e.grep(c,function(e,t){return e!==o});else if(c.length&&t.shiftKey){var h=c.pop(),f=Math.min(o,h),v=Math.max(o,h);c=[];for(var m=f;m<=v;m++)m!==h&&c.push(m);c.push(h)}}else c=[o];return R(c),Se.onSelectedRowsChanged&&Se.onSelectedRowsChanged(),!1}if(ae(o)&&Se.onClick&&(s=l.editorLock.commitCurrentEdit())&&Se.onClick(t,o,a))return t.stopPropagation(),t.preventDefault(),!1;l.enableCellNavigation&&!r[a].unselectable&&(!0===s||null===s&&l.editorLock.commitCurrentEdit())&&O(i[0],o===n.length||l.autoEdit,!1)}}function q(t){var i=e(t.target).closest(".slick-cell");if(0!==i.length&&(Ae!==i[0]||null===ze)){var o=parseInt(i.parent().attr("row"),10),n=parseInt(i.attr("cell"),10);return ae(o)&&Se.onContextMenu&&l.editorLock.commitCurrentEdit()&&Se.onContextMenu(t,o,n)?(t.stopPropagation(),t.preventDefault(),!1):void 0}}function K(t){var i=e(t.target).closest(".slick-cell");if(0!==i.length&&(Ae!==i[0]||null===ze)){var o=parseInt(i.parent().attr("row"),10),n=parseInt(i.attr("cell"),10);if(ae(o)&&Se.onDblClick&&l.editorLock.commitCurrentEdit()&&Se.onDblClick(t,o,n))return t.stopPropagation(),t.preventDefault(),!1;l.editable&&ie(o,n,!0)}}function _(e){Se.onHeaderContextMenu&&l.editorLock.commitCurrentEdit()&&(e.preventDefault(),Se.onHeaderContextMenu(e))}function J(t){if(l.enableAutoTooltips){var i=e(t.target).closest(".slick-cell",fe);i&&i.length&&(i.innerWidth()<i[0].scrollWidth?i.attr("title",e.trim(i.text())):i.attr("title",""))}}function Q(t,i,o){null!==Ae&&(Y(),e(Ae).removeClass("selected")),null!==(Ae=t)?(ke=parseInt(e(Ae).parent().attr("row"),10),ye=parseInt(e(Ae).attr("cell"),10),e(Ae).addClass("selected"),ee(o),l.editable&&i&&X(ke,ye)?(clearTimeout(Ke),l.asyncEditorLoading?Ke=setTimeout($,l.asyncEditorLoadDelay,"JavaScript"):$()):Ae.focus()):(ke=null,ye=null)}function O(e,t,i){Q(e,t,i),R(e?[ke]:[]),Se.onSelectedRowsChanged&&Se.onSelectedRowsChanged()}function U(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}function X(e,t){return!(e<le()&&!ae(e)||r[t].cannotTriggerInsert&&e>=le()||!r[t].editor)}function Y(){ze&&(Se.onBeforeCellEditorDestroy&&Se.onBeforeCellEditorDestroy(ze),ze.destroy(),e(Ae).removeClass("editable invalid"),ae(ke)&&(Ae.innerHTML=r[ye].formatter(ke,ye,ae(ke)[r[ye].field],r[ye],ae(ke)),F(ke)),ze=null,e.browser.msie&&U(),l.editorLock.deactivate(xe))}function $(){if(Ae){if(!l.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";if(clearTimeout(Ke),X(ke,ye))if(Se.onBeforeEditCell&&!1===Se.onBeforeEditCell(ke,ye,ae(ke)))Ae.focus();else{l.editorLock.activate(xe),e(Ae).addClass("editable");var t=null;ae(ke)&&(t=ae(ke)[r[ye].field]),Ae.innerHTML="",ze=new r[ye].editor(e(Ae),r[ye],t,ae(ke),function(){l.editorLock.commitCurrentEdit()&&Ae.focus()})}}}function Z(e,t){var i=he[0].scrollTop;(e+1)*l.rowHeight>i+ve?(he[0].scrollTop=t?e*l.rowHeight:(e+1)*l.rowHeight-ve,V()):e*l.rowHeight<i&&(he[0].scrollTop=t?(e+1)*l.rowHeight-ve:e*l.rowHeight,V())}function ee(e){Ae&&Z(ke,e)}function te(t,i,o){if(Ae&&l.enableCellNavigation&&l.editorLock.commitCurrentEdit()){var r=Ie[ke+t],a=r?e(r).find(".slick-cell[cell="+(ye+i)+"]"):null;if(a&&!a.is("[tabIndex=0]:visible")&&(a=i>0?a.nextAll("[tabIndex=0]:visible:first"):a.prevAll("[tabIndex=0]:visible:first")),!o||0!==t||r&&a&&a.length||a&&a.length||(a=i>0?(r=Ie[ke+t+1])?e(r).find(".slick-cell[cell]:first"):null:(r=Ie[ke+t-1])?e(r).find(".slick-cell[cell]:last"):null)&&!a.is("[tabIndex=0]:visible")&&(a=i>0?a.nextAll("[tabIndex=0]:visible:first"):a.prevAll("[tabIndex=0]:visible:first")),r&&a&&a.length){var s=parseInt(e(r).attr("row"),10);O(a[0],s===n.length||l.autoEdit,!0),ze||Ae.focus()}else Ae.focus()}}function ie(t,i,o){t>le()||t<0||i>=r.length||i<0||l.enableCellNavigation&&!r[i].unselectable&&l.editorLock.commitCurrentEdit()&&(Ie[t]||D(t,t),O(i=e(Ie[t]).find(".slick-cell[cell="+i+"][tabIndex=0]:visible")[0],o||t===n.length||l.autoEdit,!1),ze||Ae.focus())}function oe(){if(ze){if(ze.isValueChanged()){var t=ze.validate();if(t.valid){var i=ze.getValue();return ke<le()?(r[ye].setValueHandler?(Y(),r[ye].setValueHandler(i,r[ye],ae(ke))):(ae(ke)[r[ye].field]=i,Y()),Se.onCellChange&&Se.onCellChange(ke,ye,ae(ke))):Se.onAddNewRow&&(Y(),Se.onAddNewRow(r[ye],i)),!l.editorLock.isActive()}return e(Ae).addClass("invalid"),e(Ae).stop(!0,!0).effect("highlight",{color:"red"},300),Se.onValidationError&&Se.onValidationError(Ae,t,ke,ye,r[ye]),ze.focus(),!1}Y()}return!0}function ne(){return Y(),!0}var re,le,ae,se,de,ce,ue,he,fe,ve,me,pe,ge,we,Ce,be,ke,ye,xe,Re,Ee={rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showSecondaryHeaderRow:!1,secondaryHeaderRowHeight:25,syncColumnCellResize:!1,enableAutoTooltips:!0},Me={resizable:!0,sortable:!1,minWidth:30,formatter:function(e,t,i,o,n){return null===i||void 0===i?"":i}},He=50,We=5,Te=We,Le="slickgrid_"+Math.round(1e6*Math.random()),Se=this,Ae=null,ze=null,Ie={},De=0,Pe=0,Fe=0,Be=0,Ve=1,Ge=10,Ne=[],je={},qe={},Ke=null,_e=null,Je=null,Qe={},Oe=null,Ue=null,Xe=0,Ye=0;this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+Xe,e+="\ncounter_rows_removed:  "+Ye,e+="\nrenderedRows:  "+De,e+="\nnumVisibleRows:  "+Re,e+="\nCAPACITY:  "+He,e+="\nBUFFER:  "+Te,e+="\navgRowRenderTime:  "+Ge,alert(e)},this.benchmark_render_200=function(){H(),D(0,200),M(0,200)},this.stressTest=function(){console.time("benchmark-stress"),D(0,500),M(0,500),console.timeEnd("benchmark-stress"),setTimeout(Se.stressTest,50,"JavaScript")},this.benchmarkFn=function(e){var t=new Date,i=new Array(arguments);i.splice(0,1),Se[e].call(this,i),alert("Grid : benchmarkFn : "+e+" : "+(new Date-t)+"ms")},function(){if(re=n,le=re.getLength||d,ae=re.getItem||c,o=o||a(),l=e.extend({},Ee,l),Me.width=l.defaultColumnWidth,l.enableColumnReorder&&!e.fn.sortable)throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded');switch(xe={commitCurrentEdit:oe,cancelCurrentEdit:ne},t.empty().attr("tabIndex",0).attr("hideFocus",!0).css("overflow","hidden").css("outline",0).addClass(Le).addClass("ui-widget"),t.css("position")){case"absolute":case"relative":case"fixed":break;default:t.css("position","relative")}se=e("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(t),de=e("<div class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo(se),ce=e("<div class='slick-header-secondary ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(t),ue=e("<div class='slick-header-columns-secondary' style='width:100000px' />").appendTo(ce),l.showSecondaryHeaderRow||ce.hide(),he=e("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo(t),fe=e("<div class='grid-canvas' tabIndex='0' hideFocus style='overflow:hidden' />").appendTo(he),w(),he.height(t.innerHeight()-se.outerHeight()-(l.showSecondaryHeaderRow?ce.outerHeight():0)),s(de),he.bind("selectstart.ui",function(t){return e(t.target).is("input,textarea")}),u(),g(),C(),A(),he.bind("scroll",V),t.bind("resize",A),fe.bind("keydown",N),fe.bind("click",j),fe.bind("dblclick",K),fe.bind("contextmenu",q),fe.bind("mouseover",J),se.bind("contextmenu",_)}(),e.extend(this,{slickGridVersion:"1.3.2",onSort:null,onHeaderContextMenu:null,onClick:null,onDblClick:null,onContextMenu:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,onColumnsResized:null,onBeforeMoveRows:null,onMoveRows:null,onCellChange:null,onBeforeEditCell:null,onBeforeCellEditorDestroy:null,onBeforeDestroy:null,getOptions:function(e){return l},setOptions:function(t){l.editorLock.commitCurrentEdit()&&(Y(),l.enableAddRow!==t.enableAddRow&&L(le()),l=e.extend(l,t),B())},setData:function(e,t){H(),le=(re=n=e).getLength||d,ae=re.getItem||c,t&&he.scrollTop(0)},destroy:function(){l.editorLock.cancelCurrentEdit(),Se.onBeforeDestroy&&Se.onBeforeDestroy(),de.sortable&&de.sortable("destroy"),t.unbind("resize",S),b(),t.empty().removeClass(Le)},getColumnIndex:function(e){return qe[e]},setColumnVisibility:function(t,i){var o=qe[t.id];r[o].hidden=!i,de.find("[id="+r[o].id+"]").css("display",i?"block":"none"),e.rule("."+Le+" .c"+o,"style[lib=slickgrid"+Le+"]").css("display",i?"block":"none"),S(),l.forceFitColumns&&k(),p()},autosizeColumns:k,updateCell:function(t,i){if(Ie[t]){var o=e(Ie[t]).find(".slick-cell[cell="+i+"]");if(0!==o.length){var n=r[i],l=ae(t);ze&&ke===t&&ye===i?ze.setValue(l[n.field]):(o[0].innerHTML=l?n.formatter(t,i,l[n.field],n,l):"",F(t))}}},updateRow:function(t){Ie[t]&&(e(Ie[t]).find(".slick-cell").each(function(e){var i=r[e];t===ke&&e===ye&&ze?ze.setValue(ae(ke)[i.field]):ae(t)?this.innerHTML=i.formatter(t,e,ae(t)[i.field],i,ae(t)):this.innerHTML=""}),F(t))},removeRow:L,removeRows:T,removeAllRows:H,render:B,invalidate:function(){z(le()),H(),B()},getViewport:I,resizeCanvas:S,updateRowCount:z,getCellFromPoint:function(e,t){for(var i=Math.floor(t/l.rowHeight),o=0,n=0,a=0;a<r.length&&n<t;a++)n+=r[a].width,o++;return{row:i,cell:o-1}},getCurrentCell:function(){return Ae?{row:ke,cell:ye}:null},getCurrentCellNode:function(){return Ae},resetCurrentCell:function(){Q(null,!1,!1)},gotoCell:ie,editCurrentCell:$,getCellEditor:function(){return ze},scrollRowIntoView:Z,getSelectedRows:x,setSelectedRows:R,getSecondaryHeaderRow:function(){return ue[0]},showSecondaryHeaderRow:function(){l.showSecondaryHeaderRow=!0,ce.slideDown("fast",S)},hideSecondaryHeaderRow:function(){l.showSecondaryHeaderRow=!1,ce.slideUp("fast",S)},reorderColumns:function(t){for(var i=t.length-1;i>=0;i--)de.children().first().attr("id")!=t[i]&&de.children().first().before(de.find("#"+e.escapeSelectorMetachars(t[i])));v()},setSortColumn:function(e,t){$sortcol=e?de.find("#"+e):null,h($sortcol,t)},getEditController:function(){return xe}})},EditorLock:t,GlobalEditorLock:new t}})}(jQuery);