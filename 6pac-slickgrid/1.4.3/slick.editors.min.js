!function(e){var t={SelectorCellFormatter:function(e,t,i,n,o){return o?e:""},PercentCompleteCellFormatter:function(e,t,i,n,o){return null==i||""===i?"-":i<50?"<span style='color:red;font-weight:bold;'>"+i+"%</span>":"<span style='color:green'>"+i+"%</span>"},GraphicalPercentCompleteCellFormatter:function(e,t,i,n,o){if(null==i||""===i)return"";return"<span class='percent-complete-bar' style='background:"+(i<30?"red":i<70?"silver":"green")+";width:"+i+"%'></span>"},YesNoCellFormatter:function(e,t,i,n,o){return i?"Yes":"No"},BoolCellFormatter:function(e,t,i,n,o){return i?"<img src='../images/tick.png'>":""},TaskNameFormatter:function(e,t,i,n,o){return"<span style='display:inline-block;height:1px;width:"+(2+15*o.indent)+"px'></span>"+" <img src='../images/expand.gif'>&nbsp;"+i},ResourcesFormatter:function(e,t,i,n,o){var l=o.resources;return l&&0!=l.length?n.width<50?(l.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+l.join(", ")+"'></center>":l.join(", "):""},StarFormatter:function(e,t,i,n,o){return i?"<img src='../images/bullet_star.png' align='absmiddle'>":""},TextCellEditor:function(t){var i,n;this.init=function(){i=e("<INPUT type=text class='editor-text' />").appendTo(t.container).bind("keydown.nav",function(t){t.keyCode!==e.ui.keyCode.LEFT&&t.keyCode!==e.ui.keyCode.RIGHT||t.stopImmediatePropagation()}).focus().select()},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(e){n=e[t.column.field]||"",i.val(n),i[0].defaultValue=n,i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==n)&&i.val()!=n},this.validate=function(){if(t.column.validator){var e=t.column.validator(i.val());if(!e.valid)return e}return{valid:!0,msg:null}},this.init()},IntegerCellEditor:function(t){var i,n;this.init=function(){(i=e("<INPUT type=text class='editor-text' />")).bind("keydown.nav",function(t){t.keyCode!==e.ui.keyCode.LEFT&&t.keyCode!==e.ui.keyCode.RIGHT||t.stopImmediatePropagation()}),i.appendTo(t.container),i.focus().select()},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(e){n=e[t.column.field],i.val(n),i[0].defaultValue=n,i.select()},this.serializeValue=function(){return parseInt(i.val(),10)||0},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==n)&&i.val()!=n},this.validate=function(){return isNaN(i.val())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}},this.init()},DateCellEditor:function(t){var i,n,o=!1;this.init=function(){(i=e("<INPUT type=text class='editor-text' />")).appendTo(t.container),i.focus().select(),i.datepicker({showOn:"button",buttonImageOnly:!0,buttonImage:"../images/calendar.gif",beforeShow:function(){o=!0},onClose:function(){o=!1}}),i.width(i.width()-18)},this.destroy=function(){e.datepicker.dpDiv.stop(!0,!0),i.datepicker("hide"),i.datepicker("destroy"),i.remove()},this.show=function(){o&&e.datepicker.dpDiv.stop(!0,!0).show()},this.hide=function(){o&&e.datepicker.dpDiv.stop(!0,!0).hide()},this.position=function(t){o&&e.datepicker.dpDiv.css("top",t.top+30).css("left",t.left)},this.focus=function(){i.focus()},this.loadValue=function(e){n=e[t.column.field],i.val(n),i[0].defaultValue=n,i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==n)&&i.val()!=n},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoSelectCellEditor:function(t){var i,n;this.init=function(){(i=e("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>")).appendTo(t.container),i.focus()},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(e){i.val((n=e[t.column.field])?"yes":"no"),i.select()},this.serializeValue=function(){return"yes"==i.val()},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return i.val()!=n},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoCheckboxCellEditor:function(t){var i,n;this.init=function(){(i=e("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(t.container),i.focus()},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(e){(n=e[t.column.field])?i.attr("checked","checked"):i.removeAttr("checked")},this.serializeValue=function(){return i.attr("checked")},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return i.attr("checked")!=n},this.validate=function(){return{valid:!0,msg:null}},this.init()},PercentCompleteCellEditor:function(t){var i,n,o;this.init=function(){(i=e("<INPUT type=text class='editor-percentcomplete' />")).width(e(t.container).innerWidth()-25),i.appendTo(t.container),(n=e("<div class='editor-percentcomplete-picker' />").appendTo(t.container)).append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>"),n.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>"),i.focus().select(),n.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:o,slide:function(e,t){i.val(t.value)}}),n.find(".editor-percentcomplete-buttons button").bind("click",function(t){i.val(e(this).attr("val")),n.find(".editor-percentcomplete-slider").slider("value",e(this).attr("val"))})},this.destroy=function(){i.remove(),n.remove()},this.focus=function(){i.focus()},this.loadValue=function(e){i.val(o=e[t.column.field]),i.select()},this.serializeValue=function(){return parseInt(i.val(),10)||0},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==o)&&(parseInt(i.val(),10)||0)!=o},this.validate=function(){return isNaN(parseInt(i.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}},this.init()},StarCellEditor:function(t){function i(e){if("keydown"!=e.type||32==e.which)return"1"==n.css("opacity")?n.css("opacity",.5):n.css("opacity",1),e.preventDefault(),e.stopPropagation(),!1}var n,o;this.init=function(){n=e("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",i).appendTo(t.container).focus()},this.destroy=function(){n.unbind("click keydown",i),n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){o=e[t.column.field],n.css("opacity",o?1:.2)},this.serializeValue=function(){return"1"==n.css("opacity")},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return o!=("1"==n.css("opacity"))},this.validate=function(){return{valid:!0,msg:null}},this.init()},LongTextCellEditor:function(t){var i,n,o,l=this;this.init=function(){var o=e("body");n=e("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(o),i=e("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(n),e("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(n),n.find("button:first").bind("click",this.save),n.find("button:last").bind("click",this.cancel),i.bind("keydown",this.handleKeyDown),l.position(t.position),i.focus().select()},this.handleKeyDown=function(t){t.which==e.ui.keyCode.ENTER&&t.ctrlKey?l.save():t.which==e.ui.keyCode.ESCAPE?(t.preventDefault(),l.cancel()):t.which==e.ui.keyCode.TAB&&t.shiftKey?(t.preventDefault(),grid.navigatePrev()):t.which==e.ui.keyCode.TAB&&(t.preventDefault(),grid.navigateNext())},this.save=function(){t.commitChanges()},this.cancel=function(){i.val(o),t.cancelChanges()},this.hide=function(){n.hide()},this.show=function(){n.show()},this.position=function(e){n.css("top",e.top-5).css("left",e.left-5)},this.destroy=function(){n.remove()},this.focus=function(){i.focus()},this.loadValue=function(e){i.val(o=e[t.column.field]),i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(e,i){e[t.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==o)&&i.val()!=o},this.validate=function(){return{valid:!0,msg:null}},this.init()}};e.extend(window,t)}(jQuery);