if("undefined"==typeof jQuery)throw new Error("SlickGrid requires jquery module to be loaded");if(!jQuery.fn.drag)throw new Error("SlickGrid requires jquery.event.drag module to be loaded");!function(e){function t(){var e=null;this.isActive=function(t){return t?e===t:null!==e},this.activate=function(t){if(t!==e){if(null!==e)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t}},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return!e||e.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!e||e.cancelCurrentEdit()}}var i;e.extend(!0,window,{Slick:{Grid:function(t,o,n,r){function l(){var t=e("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function a(e){Oe.width(e),Je=e>Ye-i.width}function s(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function d(){return ze.length}function c(e){return ze[e]}function u(){for(var t=0,i=e.browser.mozilla?5e6:1e9,o=e("<div style='display:none' />").appendTo(document.body);t<=i&&(o.css("height",t+1e6),o.height()===t+1e6);)t+=1e6;return o.remove(),t}function h(){for(var t=Oe[0];(t=t.parentNode)!=document.body;)t!=_e[0]&&t.scrollWidth==t.clientWidth&&t.scrollHeight==t.clientHeight||e(t).bind("scroll.slickgrid",we)}function f(){Oe.parents().unbind("scroll.slickgrid")}function v(){var t;for(Ke.empty(),Et={},t=0;t<n.length;t++){var i=n[t]=e.extend({},ut,n[t]);Et[i.id]=t;var o=e("<div class='ui-state-default slick-header-column' id='"+mt+i.id+"' />").html("<span class='slick-column-name'>"+i.name+"</span>").width(i.width-Ze).attr("title",i.toolTip||i.name||"").appendTo(Ke);(r.enableColumnReorder||i.sortable)&&o.hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),i.sortable&&o.append("<span class='slick-sort-indicator' />")}W(dt,Lt),p(),r.enableColumnReorder&&g()}function m(){Ke.click(function(t){if(!e(t.target).hasClass("slick-resizable-handle")&&gt.onSort){var i=e(t.target).closest(".slick-header-column");if(!i.length)return;var o=n[ee(i[0])];if(o.sortable){if(!r.editorLock.commitCurrentEdit())return;o.id===dt?Lt=!Lt:(dt=o.id,Lt=!0),W(dt,Lt),gt.onSort(o,Lt)}}})}function g(){Ke.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(t,i){e(i.helper).addClass("slick-header-column-active")},beforeStop:function(t,i){e(i.helper).removeClass("slick-header-column-active")},stop:function(t){if(r.editorLock.commitCurrentEdit()){for(var i=Ke.sortable("toArray"),o=[],l=0;l<i.length;l++)o.push(n[R(i[l].replace(mt,""))]);T(o),gt.onColumnsReordered&&gt.onColumnsReordered(),t.stopPropagation(),p()}else e(this).sortable("cancel")}})}function p(){var t,i,o,l,s,d,c,u,h,f;(s=Ke.children()).find(".slick-resizable-handle").remove(),s.each(function(e,t){n[e].resizable&&(void 0===u&&(u=e),h=e)}),s.each(function(v,m){void 0!==u&&v<u||r.forceFitColumns&&v>=h||(t=e(m),e("<div class='slick-resizable-handle' />").appendTo(m).bind("dragstart",function(t,a){if(!r.editorLock.commitCurrentEdit())return!1;l=t.pageX,e(this).parent().addClass("slick-header-column-active");var u=null,h=null;if(s.each(function(t,i){n[t].previousWidth=e(i).outerWidth()}),r.forceFitColumns)for(u=0,h=0,i=v+1;i<s.length;i++)(o=n[i]).resizable&&(null!==h&&(o.maxWidth?h+=o.maxWidth-o.previousWidth:h=null),u+=o.previousWidth-Math.max(o.minWidth||0,it));var m=0,g=0;for(i=0;i<=v;i++)(o=n[i]).resizable&&(null!==g&&(o.maxWidth?g+=o.maxWidth-o.previousWidth:g=null),m+=o.previousWidth-Math.max(o.minWidth||0,it));null===u&&(u=1e5),null===m&&(m=1e5),null===h&&(h=1e5),null===g&&(g=1e5),c=l+Math.min(u,g),d=l-Math.min(m,h),f=Oe.width()}).bind("drag",function(e,t){var u,h,m=Math.min(c,Math.max(d,e.pageX))-l;if(m<0){for(h=m,i=v;i>=0;i--)(o=n[i]).resizable&&(u=Math.max(o.minWidth||0,it),h&&o.previousWidth+h<u?(h+=o.previousWidth-u,M(i,u,r.syncColumnCellResize)):(M(i,o.previousWidth+h,r.syncColumnCellResize),h=0));if(r.forceFitColumns)for(h=-m,i=v+1;i<s.length;i++)(o=n[i]).resizable&&(h&&o.maxWidth&&o.maxWidth-o.previousWidth<h?(h-=o.maxWidth-o.previousWidth,M(i,o.maxWidth,r.syncColumnCellResize)):(M(i,o.previousWidth+h,r.syncColumnCellResize),h=0));else r.syncColumnCellResize&&a(f+m)}else{for(h=m,i=v;i>=0;i--)(o=n[i]).resizable&&(h&&o.maxWidth&&o.maxWidth-o.previousWidth<h?(h-=o.maxWidth-o.previousWidth,M(i,o.maxWidth,r.syncColumnCellResize)):(M(i,o.previousWidth+h,r.syncColumnCellResize),h=0));if(r.forceFitColumns)for(h=-m,i=v+1;i<s.length;i++)(o=n[i]).resizable&&(u=Math.max(o.minWidth||0,it),h&&o.previousWidth+h<u?(h+=o.previousWidth-u,M(i,u,r.syncColumnCellResize)):(M(i,o.previousWidth+h,r.syncColumnCellResize),h=0));else r.syncColumnCellResize&&a(f+m)}}).bind("dragend",function(t,l){var a;for(e(this).parent().removeClass("slick-header-column-active"),i=0;i<s.length;i++)o=n[i],a=e(s[i]).outerWidth(),o.previousWidth!==a&&o.rerenderOnResize&&F(),r.forceFitColumns?o.width=Math.floor(o.width*(a-o.previousWidth)/o.previousWidth)+o.width:o.width=a,r.syncColumnCellResize||o.previousWidth===a||M(i,a,!0);K(),gt.onColumnsResized&&gt.onColumnsResized()}))})}function C(){Oe.bind("draginit",function(t,i){var o=e(t.target).closest(".slick-cell");if(0===o.length)return!1;if(parseInt(o.parent().attr("row"),10)>=De())return!1;var r=n[ee(o[0])];return("move"===r.behavior||"selectAndMove"===r.behavior)&&void 0}).bind("dragstart",function(t,i){if(!r.editorLock.commitCurrentEdit())return!1;var o=parseInt(e(t.target).closest(".slick-row").attr("row"),10);Wt[o]||L([o]),i.selectionProxy=e("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",e(this).innerWidth()).css("height",r.rowHeight*Mt.length).appendTo(_e),i.guide=e("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",e(this).innerWidth()).css("top",-1e3).appendTo(_e),i.insertBefore=-1}).bind("drag",function(t,i){var o=t.clientY-e(this).offset().top;i.selectionProxy.css("top",o-5);var n=Math.max(0,Math.min(Math.round(o/r.rowHeight),De()));n!==i.insertBefore&&(gt.onBeforeMoveRows&&!1===gt.onBeforeMoveRows(E(),n)?(i.guide.css("top",-1e3),i.canMove=!1):(i.guide.css("top",n*r.rowHeight),i.canMove=!0),i.insertBefore=n)}).bind("dragend",function(e,t){t.guide.remove(),t.selectionProxy.remove(),gt.onMoveRows&&t.canMove&&gt.onMoveRows(E(),t.insertBefore)})}function w(){var t=e("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo(Ke);Ze=t.outerWidth()-t.width(),$e=t.outerHeight()-t.height(),t.remove();var i=e("<div class='slick-row' />").appendTo(Oe);t=e("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(i),et=t.outerWidth()-t.width(),tt=t.outerHeight()-t.height(),i.remove(),it=Math.max(Ze,et)}function b(){Qe=e("<style type='text/css' rel='stylesheet' />").appendTo(e("head"));for(var t=r.rowHeight-tt,i=["."+mt+" .slick-header-column { left: 10000px; }","."+mt+" .slick-header-columns-secondary {  height:"+r.secondaryHeaderRowHeight+"px; }","."+mt+" .slick-cell { height:"+t+"px; line-height:"+t+"px; }"],o=0;o<n.length;o++)i.push("."+mt+" .c"+o+" { width:"+((n[o].currentWidth||n[o].width)-et)+"px;  } ");Qe[0].styleSheet?Qe[0].styleSheet.cssText=i.join(""):Qe[0].appendChild(document.createTextNode(i.join(" ")));for(var l=document.styleSheets,o=0;o<l.length;o++)if((l[o].ownerNode||l[o].owningElement)==Qe[0]){Ue=l[o];break}}function y(e){for(var t=Ue.cssRules||Ue.rules,i=0;i<t.length;i++)if(t[i].selectorText==e)return t[i];return null}function k(e){return y("."+mt+" .c"+e)}function x(){Qe.remove()}function R(e){return Et[e]}function H(){var e,t,o=[],l=0,a=r.autoHeight?Ye:Ye-i.width,s=0,d=0;for(e=0;e<n.length;e++)t=n[e],o.push(t.width),d+=t.width,l+=t.width-Math.max(t.minWidth||0,it);for(s=d,F();s>a;){if(!l)return;var c=(s-a)/l;for(e=0;e<n.length&&s>a;e++)if((t=n[e]).resizable&&t.minWidth!==t.width&&t.width!==it){var u=Math.floor(c*(t.width-Math.max(t.minWidth||0,it)))||1;s-=u,o[e]-=u}}for(var h=s;s<a;){var f=a/s;for(e=0;e<n.length&&s<a;e++)if((t=n[e]).resizable&&!(t.maxWidth<=t.width)){var v=Math.min(Math.floor(f*t.width)-t.width,t.maxWidth-t.width||1e6)||1;s+=v,o[e]+=v}if(h==s)break;h=s}for(e=0;e<n.length;e++)M(e,n[e].currentWidth=o[e],!0);K()}function M(e,t,i){n[e].currentWidth=t,Ke.children().eq(e).css("width",t-Ze),i&&(k(e).style.width=t-et+"px")}function W(e,t){Lt=t;var i=R(dt=e);Ke.children().removeClass("slick-header-column-sorted"),Ke.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),null!=i&&Ke.children().eq(i).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(Lt?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}function E(){return Mt.concat()}function L(t){var i,o,n={};for(i=0;i<t.length;i++)n[t[i]]=!0;for(i=0;i<Mt.length;i++)o=Mt[i],wt[o]&&!n[o]&&e(wt[o]).removeClass("ui-state-active selected");for(i=0;i<t.length;i++)o=t[i],wt[o]&&!Wt[o]&&e(wt[o]).addClass("ui-state-active selected");Mt=t.concat(),Wt=n}function T(e){n=e,F(),v(),x(),b(),G()}function S(e){var t=ft;ht=Math.min(Ie-1,Math.floor(e/qe));var i=e-(ft=Math.round(ht*Ne));if(ft!=t){var o=_(i);P(o.top,o.bottom),Y()}yt!=i&&(vt=yt+t<i+ft?1:-1,_e[0].scrollTop=xt=kt=yt=i,gt.onViewportChanged&&gt.onViewportChanged())}function z(e,t,i,o,n){return null===i||void 0===i?"":i}function D(e){return e.formatter||r.formatterFactory&&r.formatterFactory.getFormatter(e)||z}function A(e){return e.editor||r.editorFactory&&r.editorFactory.getEditor(e)}function V(e,t){var i,o=Ae(t),l="slick-row "+(t<De()&&!o?" loading":"")+(Wt[t]?" selected ui-state-active":"")+(t%2==1?" odd":" even");r.rowCssClasses&&(l+=" "+r.rowCssClasses(o)),e.push("<div class='ui-widget-content "+l+"' row='"+t+"' style='top:"+(r.rowHeight*t-ft)+"px'>");for(var a=0,s=n.length;a<s;a++){var d=n[a];i="slick-cell c"+a+(d.cssClass?" "+d.cssClass:""),st&&st[t]&&st[t][d.id]&&(i+=" "+r.cellHighlightCssClass),e.push("<div class='"+i+"'>"),o&&e.push(D(d)(t,a,o[d.field],d,o)),e.push("</div>")}e.push("</div>")}function P(e){for(var t in wt)(t=parseInt(t,10))!==ot&&(t<e.top||t>e.bottom)&&q(t)}function F(){Ct&&fe(),Oe[0].innerHTML="",wt={},Dt={},Ft+=bt,bt=0}function q(e){var t=wt[e];t&&(Oe[0].removeChild(t),delete wt[e],delete Dt[e],bt--,Ft++)}function I(e){var t,i,o;if(e&&e.length){vt=0;var n=[];for(t=0,i=e.length;t<i;t++)Ct&&ot===t&&fe(),wt[e[t]]&&n.push(e[t]);if(bt>10&&n.length===bt)F();else for(t=0,o=n.length;t<o;t++)q(n[t])}}function N(e){I([e])}function B(t){wt[t]&&(e(wt[t]).children().each(function(e){var i=n[e];t===ot&&e===nt&&Ct?Ct.loadValue(Ae(ot)):Ae(t)?this.innerHTML=D(i)(t,e,Ae(t)[i.field],i,Ae(t)):this.innerHTML=""}),X(t))}function K(){var i=r.rowHeight*(De()+(r.enableAddRow?1:0)+(r.leaveSpaceForNewRows?at-1:0));r.autoHeight?_e.height(i):_e.height(t.innerHeight()-Be.outerHeight()-(r.showSecondaryHeaderRow?Ge.outerHeight():0)),Ye=_e.innerWidth(),Xe=_e.innerHeight(),at=Math.ceil(Xe/r.rowHeight);var o=0;Ke.find(".slick-header-column").each(function(){o+=e(this).outerWidth()}),a(o),j(),J()}function G(){r.forceFitColumns?H():K()}function j(){var e=De()+(r.enableAddRow?1:0)+(r.leaveSpaceForNewRows?at-1:0),t=Fe;(Pe=Math.max(r.rowHeight*e,Xe-i.height))<Ve?(Fe=qe=Pe,Ie=1,Ne=0):(qe=(Fe=Ve)/100,Ie=Math.floor(Pe/qe),Ne=(Pe-Fe)/(Ie-1)),Fe!==t&&(Oe.css("height",Fe),kt=_e[0].scrollTop);var o=kt+ft<=Pe-Xe;0==Pe||0==kt?ht=ft=0:S(o?kt+ft:Pe-Xe),Fe!=t&&r.autoHeight&&K()}function _(e){return null==e&&(e=kt),{top:Math.floor((kt+ft)/r.rowHeight),bottom:Math.ceil((kt+ft+Xe)/r.rowHeight)}}function O(e){var t=_(e),i=Math.round(Xe/r.rowHeight);return-1==vt?(t.top-=i,t.bottom+=3):1==vt?(t.top-=3,t.bottom+=i):(t.top-=3,t.bottom+=3),t.top=Math.max(0,t.top),t.bottom=Math.min(r.enableAddRow?De():De()-1,t.bottom),t}function Q(t){var i,o,n=Oe[0],r=bt,l=[],a=[],s=new Date,d=!1;for(i=t.top;i<=t.bottom;i++)wt[i]||(bt++,a.push(i),V(l,i),pt&&ot===i&&(d=!0),Pt++);var c=document.createElement("div");for(c.innerHTML=l.join(""),i=0,o=c.childNodes.length;i<o;i++)wt[a[i]]=n.appendChild(c.firstChild);d&&de(pt=e(wt[ot]).children().eq(nt)[0],!1),bt-r>5&&(Ht=(new Date-s)/(bt-r))}function U(){r.enableAsyncPostRender&&(clearTimeout(zt),zt=setTimeout($,r.asyncPostRenderDelay))}function X(e){delete Dt[e],Vt=Math.min(Vt,e),At=Math.max(At,e),U()}function Y(){for(var e in wt)wt[e].style.top=e*r.rowHeight-ft+"px"}function J(){var e=_(),t=O();P(t),Q(t),Vt=e.top,At=Math.min(r.enableAddRow?De():De()-1,e.bottom),U(),xt=kt,St=null}function Z(){kt=_e[0].scrollTop;var e=_e[0].scrollLeft,t=Math.abs(kt-yt);if(e!==Rt&&(Rt=e,Be[0].scrollLeft=e,Ge[0].scrollLeft=e),t){if(vt=yt<kt?1:-1,yt=kt,t<Xe)S(kt+ft);else{var i=ft;ht=Math.min(Ie-1,Math.floor(kt*((Pe-Xe)/(Fe-Xe))*(1/qe))),i!=(ft=Math.round(ht*Ne))&&F()}St&&clearTimeout(St),Math.abs(xt-kt)<Xe?J():St=setTimeout(J,50),gt.onViewportChanged&&gt.onViewportChanged()}}function $(){for(;Vt<=At;){var e=vt>=0?Vt++:At--,t=wt[e];if(!(!t||Dt[e]||e>=De())){for(var i=Ae(e),o=t.childNodes,l=0,a=0,s=n.length;l<s;++l){var d=n[l];d.asyncPostRender&&d.asyncPostRender(o[a],Vt,i,d),++a}return Dt[e]=!0,void(zt=setTimeout($,r.asyncPostRenderDelay))}}}function ee(e){for(var t=0;e&&e.previousSibling;)t++,e=e.previousSibling;return t}function te(e){if(!gt.onKeyDown||r.editorLock.isActive()||!gt.onKeyDown(e,ot,nt))if(e.shiftKey||e.altKey||e.ctrlKey){if(9!=e.which||!e.shiftKey||e.ctrlKey||e.altKey)return;Ee()}else if(27==e.which){if(!r.editorLock.isActive())return;ge()}else if(37==e.which)Me();else if(39==e.which)We();else if(38==e.which)Re();else if(40==e.which)He();else if(9==e.which)Le();else{if(13!=e.which)return;r.editable&&(Ct?ot===d()?He():me():r.editorLock.commitCurrentEdit()&&ve())}e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(e){}}function ie(t){var i=e(t.target).closest(".slick-cell");if(0!==i.length&&(pt!==i[0]||null===Ct)){var o=parseInt(i.parent().attr("row"),10),l=ee(i[0]),a=null,s=n[l],c=Ae(o);if(c&&("selectAndMove"===s.behavior||"select"===s.behavior||t.ctrlKey||t.shiftKey)&&(a=r.editorLock.commitCurrentEdit())){var u=E(),h=e.inArray(o,u);if(t.ctrlKey||t.shiftKey){if(-1===h&&t.ctrlKey)u.push(o);else if(-1!==h&&t.ctrlKey)u=e.grep(u,function(e,t){return e!==o});else if(u.length&&t.shiftKey){var f=u.pop(),v=Math.min(o,f),m=Math.max(o,f);u=[];for(var g=v;g<=m;g++)g!==f&&u.push(g);u.push(f)}}else u=[o];return ae(),L(u),gt.onSelectedRowsChanged&&gt.onSelectedRowsChanged(),e.browser.msie||Oe[0].focus(),!1}if(c&&gt.onClick&&(a=r.editorLock.commitCurrentEdit())&&gt.onClick(t,o,l))return t.stopPropagation(),t.preventDefault(),!1;r.enableCellNavigation&&!n[l].unselectable&&(!0===a||null===a&&r.editorLock.commitCurrentEdit())&&(ye(o,!1),ce(i[0],o===d()||r.autoEdit))}}function oe(t){var i=e(t.target).closest(".slick-cell");if(0!==i.length&&(pt!==i[0]||null===Ct)){var o=parseInt(i.parent().attr("row"),10),n=ee(i[0]);return Ae(o)&&gt.onContextMenu&&r.editorLock.commitCurrentEdit()&&gt.onContextMenu(t,o,n)?(t.stopPropagation(),t.preventDefault(),!1):void 0}}function ne(t){var i=e(t.target).closest(".slick-cell");if(0!==i.length&&(pt!==i[0]||null===Ct)){var o=parseInt(i.parent().attr("row"),10),n=ee(i[0]);if(Ae(o)&&gt.onDblClick&&r.editorLock.commitCurrentEdit()&&gt.onDblClick(t,o,n))return t.stopPropagation(),t.preventDefault(),!1;r.editable&&xe(o,n,!0)}}function re(e){gt.onHeaderContextMenu&&r.editorLock.commitCurrentEdit()&&(e.preventDefault(),gt.onHeaderContextMenu(e))}function le(t){if(r.enableAutoTooltips){var i=e(t.target).closest(".slick-cell",Oe);i&&i.length&&(i.innerWidth()<i[0].scrollWidth?i.attr("title",e.trim(i.text())):i.attr("title",""))}}function ae(){de(null,!1)}function se(){if(e(pt).attr("tabIndex",0).attr("hideFocus",!0),e.browser.msie&&parseInt(e.browser.version)<8){pt.setActive();var t=e(pt).position().left,i=t+e(pt).outerWidth(),o=_e.scrollLeft(),n=o+_e.width();t<o?_e.scrollLeft(t):i>n&&_e.scrollLeft(Math.min(t,i-_e[0].clientWidth))}else pt.focus()}function de(t,i){null!==pt&&(fe(),e(pt).removeClass("selected")),null!==(pt=t)?(ot=parseInt(e(pt).parent().attr("row"),10),nt=ee(pt),e(pt).addClass("selected"),r.editable&&i&&he(ot,nt)?(clearTimeout(Tt),r.asyncEditorLoading?Tt=setTimeout(ve,r.asyncEditorLoadDelay):ve()):se(),gt.onCurrentCellChanged&&gt.onCurrentCellChanged(be())):(ot=null,nt=null)}function ce(e,t){de(e,t),L(e?[ot]:[]),gt.onSelectedRowsChanged&&gt.onSelectedRowsChanged()}function ue(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}function he(e,t){return!(e<De()&&!Ae(e)||n[t].cannotTriggerInsert&&e>=De()||!A(n[t]))}function fe(){if(Ct){if(gt.onBeforeCellEditorDestroy&&gt.onBeforeCellEditorDestroy(Ct),Ct.destroy(),Ct=null,pt&&(e(pt).removeClass("editable invalid"),Ae(ot))){var t=n[nt];pt.innerHTML=D(t)(ot,nt,Ae(ot)[t.field],t,Ae(ot)),X(ot)}e.browser.msie&&ue(),r.editorLock.deactivate(lt)}}function ve(){if(pt){if(!r.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";if(clearTimeout(Tt),he(ot,nt))if(gt.onBeforeEditCell&&!1===gt.onBeforeEditCell(ot,nt,Ae(ot)))se();else{r.editorLock.activate(lt),e(pt).addClass("editable"),pt.innerHTML="";var i=n[nt],o=Ae(ot);Ct=new(A(i))({grid:gt,gridPosition:pe(t[0]),position:pe(pt),container:pt,column:i,item:o||{},commitChanges:me,cancelChanges:ge}),o&&Ct.loadValue(o),rt=Ct.serializeValue(),Ct.position&&we()}}}function me(){r.editorLock.commitCurrentEdit()&&(se(),r.autoEdit&&He())}function ge(){r.editorLock.cancelCurrentEdit()&&se()}function pe(t){var i={top:t.offsetTop,left:t.offsetLeft,bottom:0,right:0,width:e(t).outerWidth(),height:e(t).outerHeight(),visible:!0};i.bottom=i.top+i.height,i.right=i.left+i.width;for(var o=t.offsetParent;(t=t.parentNode)!=document.body;)i.visible&&t.scrollHeight!=t.offsetHeight&&"visible"!=e(t).css("overflowY")&&(i.visible=i.bottom>t.scrollTop&&i.top<t.scrollTop+t.clientHeight),i.visible&&t.scrollWidth!=t.offsetWidth&&"visible"!=e(t).css("overflowX")&&(i.visible=i.right>t.scrollLeft&&i.left<t.scrollLeft+t.clientWidth),i.left-=t.scrollLeft,i.top-=t.scrollTop,t===o&&(i.left+=t.offsetLeft,i.top+=t.offsetTop,o=t.offsetParent),i.bottom=i.top+i.height,i.right=i.left+i.width;return i}function Ce(){return pe(pt)}function we(){if(pt){var e;gt.onCurrentCellPositionChanged&&(e=Ce(),gt.onCurrentCellPositionChanged(e)),Ct&&(e=e||Ce(),Ct.show&&Ct.hide&&(e.visible?Ct.show():Ct.hide()),Ct.position&&Ct.position(e))}}function be(){return pt?{row:ot,cell:nt}:null}function ye(e,t){var o=e*r.rowHeight,n=(e+1)*r.rowHeight-Xe+(Je?i.height:0);(e+1)*r.rowHeight>kt+Xe+ft?(S(t?o:n),J()):e*r.rowHeight<kt+ft&&(S(t?n:o),J())}function ke(t,i,o){function l(){return!n[ee(this)].unselectable}if(pt&&r.enableCellNavigation&&r.editorLock.commitCurrentEdit()){var a=wt[ot+t],s=a&&nt+i>=0?e(a).children().eq(nt+i).filter(l):null;if(s&&!s.length&&(c=e(a).children().filter(function(e){return i>0?e>nt+i:e<nt+i}).filter(l))&&c.length&&(s=i>0?c.eq(0):c.eq(c.length-1)),o&&0===t&&!(a&&s&&s.length)&&(!s||!s.length)){a=wt[ot+t+(i>0?1:-1)];var c=e(a).children().filter(l);s=i>0?a?c.eq(0):null:a?c.eq(c.length-1):null}if(a&&s&&s.length){var u=parseInt(e(a).attr("row"),10),h=u==d();ye(u,!h),ce(s[0],h||r.autoEdit),Ct||se()}else se()}}function xe(t,i,o){if(!(t>De()||t<0||i>=n.length||i<0)&&r.enableCellNavigation&&!n[i].unselectable&&r.editorLock.commitCurrentEdit()){ye(t,!1);var l=null;n[i].unselectable||(l=e(wt[t]).children().eq(i)[0]),ce(l,o||t===De()||r.autoEdit),Ct||se()}}function Re(){ke(-1,0,!1)}function He(){ke(1,0,!1)}function Me(){ke(0,-1,!1)}function We(){ke(0,1,!1)}function Ee(){ke(0,-1,!0)}function Le(){ke(0,1,!0)}function Te(){var t=Ae(ot),i=n[nt];if(Ct){if(Ct.isValueChanged()){var o=Ct.validate();if(o.valid){if(ot<De()){var l={row:ot,cell:nt,editor:Ct,serializedValue:Ct.serializeValue(),prevSerializedValue:rt,execute:function(){this.editor.applyValue(t,this.serializedValue),B(this.row)},undo:function(){this.editor.applyValue(t,this.prevSerializedValue),B(this.row)}};r.editCommandHandler?(fe(),r.editCommandHandler(t,i,l)):(l.execute(),fe()),gt.onCellChange&&gt.onCellChange(ot,nt,t)}else if(gt.onAddNewRow){var a={};Ct.applyValue(a,Ct.serializeValue()),fe(),gt.onAddNewRow(a,i)}return!r.editorLock.isActive()}return e(pt).addClass("invalid"),e(pt).stop(!0,!0).effect("highlight",{color:"red"},300),gt.onValidationError&&gt.onValidationError(pt,o,ot,nt,i),Ct.focus(),!1}fe()}return!0}function Se(){return fe(),!0}var ze,De,Ae,Ve,Pe,Fe,qe,Ie,Ne,Be,Ke,Ge,je,_e,Oe,Qe,Ue,Xe,Ye,Je,Ze,$e,et,tt,it,ot,nt,rt,lt,at,st,dt,ct={rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showSecondaryHeaderRow:!1,secondaryHeaderRowHeight:25,syncColumnCellResize:!1,enableAutoTooltips:!0,formatterFactory:null,editorFactory:null,cellHighlightCssClass:"highlighted",cellFlashingCssClass:"flashing"},ut={resizable:!0,sortable:!1,minWidth:30},ht=0,ft=0,vt=1,mt="slickgrid_"+Math.round(1e6*Math.random()),gt=this,pt=null,Ct=null,wt={},bt=0,yt=0,kt=0,xt=0,Rt=0,Ht=10,Mt=[],Wt={},Et={},Lt=!0,Tt=null,St=null,zt=null,Dt={},At=null,Vt=null,Pt=0,Ft=0;this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+Pt,e+="\ncounter_rows_removed:  "+Ft,e+="\nrenderedRows:  "+bt,e+="\nnumVisibleRows:  "+at,e+="\nmaxSupportedCssHeight:  "+Ve,e+="\nn(umber of pages):  "+Ie,e+="\n(current) page:  "+ht,e+="\npage height (ph):  "+qe,e+="\nscrollDir:  "+vt,alert(e)},function(){if(ze=o,De=ze.getLength||d,Ae=ze.getItem||c,Ve=u(),i=i||l(),r=e.extend({},ct,r),ut.width=r.defaultColumnWidth,r.enableColumnReorder&&!e.fn.sortable)throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded');switch(lt={commitCurrentEdit:Te,cancelCurrentEdit:Se},t.empty().attr("tabIndex",0).attr("hideFocus",!0).css("overflow","hidden").css("outline",0).addClass(mt).addClass("ui-widget"),t.css("position")){case"absolute":case"relative":case"fixed":break;default:t.css("position","relative")}Be=e("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(t),Ke=e("<div class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo(Be),Ge=e("<div class='slick-header-secondary ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(t),je=e("<div class='slick-header-columns-secondary' style='width:100000px' />").appendTo(Ge),r.showSecondaryHeaderRow||Ge.hide(),_e=e("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo(t),Oe=e("<div class='grid-canvas' tabIndex='0' hideFocus style='overflow:hidden' />").appendTo(_e),w(),_e.height(t.innerHeight()-Be.outerHeight()-(r.showSecondaryHeaderRow?Ge.outerHeight():0)),s(Ke),_e.bind("selectstart.ui",function(t){return e(t.target).is("input,textarea")}),v(),m(),C(),b(),G(),h(),_e.bind("scroll",Z),t.bind("resize",G),Oe.bind("keydown",te),Oe.bind("click",ie),Oe.bind("dblclick",ne),Oe.bind("contextmenu",oe),Oe.bind("mouseover",le),Be.bind("contextmenu",re)}(),e.extend(this,{slickGridVersion:"1.4",onSort:null,onHeaderContextMenu:null,onClick:null,onDblClick:null,onContextMenu:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,onColumnsResized:null,onBeforeMoveRows:null,onMoveRows:null,onCellChange:null,onBeforeEditCell:null,onBeforeCellEditorDestroy:null,onBeforeDestroy:null,onCurrentCellChanged:null,onCurrentCellPositionChanged:null,getColumns:function(){return n},setColumns:T,getOptions:function(){return r},setOptions:function(t){r.editorLock.commitCurrentEdit()&&(fe(),r.enableAddRow!==t.enableAddRow&&N(De()),r=e.extend(r,t),J())},setData:function(e,t){F(),De=(ze=o=e).getLength||d,Ae=ze.getItem||c,t&&S(0)},destroy:function(){r.editorLock.cancelCurrentEdit(),gt.onBeforeDestroy&&gt.onBeforeDestroy(),Ke.sortable&&Ke.sortable("destroy"),f(),t.unbind("resize",K),x(),t.empty().removeClass(mt)},getColumnIndex:R,autosizeColumns:H,updateCell:function(t,i){if(wt[t]){var o=e(wt[t]).children().eq(i);if(0!==o.length){var r=n[i],l=Ae(t);Ct&&ot===t&&nt===i?Ct.loadValue(l):(o[0].innerHTML=l?D(r)(t,i,l[r.field],r,l):"",X(t))}}},updateRow:B,removeRow:N,removeRows:I,removeAllRows:F,render:J,invalidate:function(){j(),F(),J()},setHighlightedCells:function(t){var i,o;for(var l in wt)for(i=0;i<n.length;i++)(st&&st[l]&&st[l][n[i].id])!=(t&&t[l]&&t[l][n[i].id])&&(o=e(wt[l]).children().eq(i)).length&&o.toggleClass(r.cellHighlightCssClass);st=t},flashCell:function(t,i,o){function n(e){e&&setTimeout(function(){l.queue(function(){l.toggleClass(r.cellFlashingCssClass).dequeue(),n(e-1)})},o)}if(o=o||100,wt[t]){var l=e(wt[t]).children().eq(i);n(4)}},getViewport:_,resizeCanvas:K,updateRowCount:j,getCellFromPoint:function(e,t){for(var i=Math.floor(t/r.rowHeight),o=0,l=0,a=0;a<n.length&&l<t;a++)l+=n[a].width,o++;return{row:i,cell:o-1}},getCurrentCell:be,getCurrentCellNode:function(){return pt},resetCurrentCell:ae,navigatePrev:Ee,navigateNext:Le,navigateUp:Re,navigateDown:He,navigateLeft:Me,navigateRight:We,gotoCell:xe,editCurrentCell:ve,getCellEditor:function(){return Ct},scrollRowIntoView:ye,getSelectedRows:E,setSelectedRows:L,getSecondaryHeaderRow:function(){return je[0]},showSecondaryHeaderRow:function(){r.showSecondaryHeaderRow=!0,Ge.slideDown("fast",K)},hideSecondaryHeaderRow:function(){r.showSecondaryHeaderRow=!1,Ge.slideUp("fast",K)},setSortColumn:W,getCurrentCellPosition:Ce,getEditController:function(){return lt}})},EditorLock:t,GlobalEditorLock:new t}})}(jQuery);