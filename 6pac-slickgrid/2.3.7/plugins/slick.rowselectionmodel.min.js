!function(e){function t(t){function n(n){y=e.extend(!0,{},C,t),v=n,m.subscribe(v.onActiveCellChanged,o(h)),m.subscribe(v.onKeyDown,o(w)),m.subscribe(v.onClick,o(g))}function r(){m.unsubscribeAll()}function o(e){return function(){p||(p=!0,e.apply(this,arguments),p=!1)}}function l(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].fromRow;r<=e[n].toRow;r++)t.push(r);return t}function i(e){for(var t=[],n=v.getColumns().length-1,r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],n));return t}function c(e,t){var n,r=[];for(n=e;n<=t;n++)r.push(n);for(n=t;n<e;n++)r.push(n);return r}function u(){return l(d)}function s(e){a(i(e))}function a(e){(d&&0!==d.length||e&&0!==e.length)&&(d=e,R.onSelectedRangesChanged.notify(d))}function f(){return d}function h(e,t){y.selectActiveRow&&null!=t.row&&a([new Slick.Range(t.row,0,t.row,v.getColumns().length-1)])}function w(e){var t=v.getActiveCell();if(t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(38==e.which||40==e.which)){var n=u();n.sort(function(e,t){return e-t}),n.length||(n=[t.row]);var r,o=n[0],l=n[n.length-1];(r=40==e.which?t.row<l||o==l?++l:++o:t.row<l?--l:--o)>=0&&r<v.getDataLength()&&(v.scrollRowIntoView(r),a(i(c(o,l)))),e.preventDefault(),e.stopPropagation()}}function g(t){var n=v.getCellFromEvent(t);if(!n||!v.canCellBeActive(n.row,n.cell))return!1;if(!v.getOptions().multiSelect||!t.ctrlKey&&!t.shiftKey&&!t.metaKey)return!1;var r=l(d),o=e.inArray(n.row,r);if(-1===o&&(t.ctrlKey||t.metaKey))r.push(n.row),v.setActiveCell(n.row,n.cell);else if(-1!==o&&(t.ctrlKey||t.metaKey))r=e.grep(r,function(e,t){return e!==n.row}),v.setActiveCell(n.row,n.cell);else if(r.length&&t.shiftKey){var c=r.pop(),u=Math.min(n.row,c),s=Math.max(n.row,c);r=[];for(var f=u;f<=s;f++)f!==c&&r.push(f);r.push(c),v.setActiveCell(n.row,n.cell)}return a(i(r)),t.stopImmediatePropagation(),!0}var v,p,y,d=[],R=this,m=new Slick.EventHandler,C={selectActiveRow:!0};e.extend(this,{getSelectedRows:u,setSelectedRows:s,getSelectedRanges:f,setSelectedRanges:a,init:n,destroy:r,onSelectedRangesChanged:new Slick.Event})}e.extend(!0,window,{Slick:{RowSelectionModel:t}})}(jQuery);