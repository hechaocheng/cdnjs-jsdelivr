!function(e){function n(n){function t(t){n=e.extend(!0,{},v,n),u=t,h.subscribe(u.onHeaderCellRendered,i).subscribe(u.onBeforeHeaderCellDestroy,d),u.setColumns(u.getColumns()),e(document.body).on("mousedown",a)}function o(){h.unsubscribeAll(),e(document.body).off("mousedown",a)}function a(n){m&&m[0]!=n.target&&!e.contains(m[0],n.target)&&s()}function s(){m&&(m.remove(),m=null,r.removeClass("slick-header-column-active"))}function i(t,o){var a=o.column,s=a.header&&a.header.menu;if(s){var i=e("<div></div>").addClass("slick-header-menubutton").data("column",a).data("menu",s);n.buttonCssClass&&i.addClass(n.buttonCssClass),n.buttonImage&&i.css("background-image","url("+n.buttonImage+")"),s.tooltip&&i.attr("title",s.tooltip),i.on("click",l).appendTo(o.node)}}function d(n,t){var o=t.column;o.header&&o.header.menu&&e(t.node).find(".slick-header-menubutton").remove()}function l(n){var t=e(this),o=t.data("menu"),a=t.data("column");if(0!=f.onBeforeMenuShow.notify({grid:u,column:a,menu:o},n,f)){m||(m=e("<div class='slick-header-menu'></div>").appendTo(u.getContainerNode())),m.empty();for(var s=0;s<o.items.length;s++){var i=o.items[s],d=e("<div class='slick-header-menuitem'></div>").data("command",i.command||"").data("column",a).data("item",i).on("click",c).appendTo(m);i.disabled&&d.addClass("slick-header-menuitem-disabled"),i.tooltip&&d.attr("title",i.tooltip);var l=e("<div class='slick-header-menuicon'></div>").appendTo(d);i.iconCssClass&&l.addClass(i.iconCssClass),i.iconImage&&l.css("background-image","url("+i.iconImage+")"),e("<span class='slick-header-menucontent'></span>").text(i.title).appendTo(d)}m.offset({top:e(this).offset().top+e(this).height(),left:e(this).offset().left}),(r=t.closest(".slick-header-column")).addClass("slick-header-column-active"),n.preventDefault(),n.stopPropagation()}}function c(n){var t=e(this).data("command"),o=e(this).data("column"),a=e(this).data("item");a.disabled||(s(),null!=t&&""!=t&&f.onCommand.notify({grid:u,column:o,command:t,item:a},n,f),n.preventDefault(),n.stopPropagation())}var u,m,r,f=this,h=new Slick.EventHandler,v={buttonCssClass:null,buttonImage:null};e.extend(this,{init:t,destroy:o,onBeforeMenuShow:new Slick.Event,onCommand:new Slick.Event})}e.extend(!0,window,{Slick:{Plugins:{HeaderMenu:n}}})}(jQuery);