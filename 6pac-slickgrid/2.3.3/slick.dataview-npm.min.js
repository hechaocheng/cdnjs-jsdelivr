!function(t){function e(e){function n(t){for(var e,n=t=t||0,i=E.length;n<i;n++){if(void 0===(e=E[n][T]))throw"Each data element must implement a unique 'id' property";D[e]=n}}function i(){for(var t,e=0,n=E.length;e<n;e++)if(void 0===(t=E[e][T])||D[t]!==e)throw"Each data element must implement a unique 'id' property"}function r(){var t=X?Math.max(1,Math.ceil(Z/X)):1;return{pageSize:X,pageNum:Y,totalRows:Z,totalPages:t,dataView:N}}function o(t,e){B=e,M=t,S=null,!1===e&&E.reverse(),E.sort(t),!1===e&&E.reverse(),D={},n(),R()}function a(t,e){B=e,S=t,M=null;var i=Object.prototype.toString;Object.prototype.toString="function"==typeof t?t:function(){return this[t]},!1===e&&E.reverse(),E.sort(),Object.prototype.toString=i,!1===e&&E.reverse(),D={},n(),R()}function l(n){e.groupItemMetadataProvider||(e.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),Q=[],W=[],H=(n=n||[])instanceof Array?n:[n];for(var i=0;i<H.length;i++){var r=H[i]=t.extend(!0,{},L,H[i]);r.getterIsAFn="function"==typeof r.getter,r.compiledAccumulators=[];for(var o=r.aggregators.length;o--;)r.compiledAccumulators[o]=v(r.aggregators[o]);W[i]={}}R()}function s(){if(!j){j={};for(var t=0,e=k.length;t<e;t++)j[k[t][T]]=t}}function u(t,e){if(null==t)for(var n=0;n<H.length;n++)W[n]={},H[n].collapsed=e;else W[t]={},H[t].collapsed=e;R()}function g(t,e,n){W[t][e]=H[t].collapsed^n,R()}function c(t,e){for(var n,i,r,o=[],a={},l=e?e.level+1:0,s=H[l],u=0,g=s.predefinedValues.length;u<g;u++)(n=a[i=s.predefinedValues[u]])||((n=new Slick.Group).value=i,n.level=l,n.groupingKey=(e?e.groupingKey+J:"")+i,o[o.length]=n,a[i]=n);for(var u=0,g=t.length;u<g;u++)r=t[u],(n=a[i=s.getterIsAFn?s.getter(r):r[s.getter]])||((n=new Slick.Group).value=i,n.level=l,n.groupingKey=(e?e.groupingKey+J:"")+i,o[o.length]=n,a[i]=n),n.rows[n.count++]=r;if(l<H.length-1)for(u=0;u<o.length;u++)(n=o[u]).groups=c(n.rows,n);return o.sort(H[l].comparer),o}function f(t){var e,n=t.group,i=H[n.level],r=n.level==H.length,o=i.aggregators.length;if(!r&&i.aggregateChildGroups)for(var a=n.groups.length;a--;)n.groups[a].totals.initialized||f(n.groups[a].totals);for(;o--;)(e=i.aggregators[o]).init(),!r&&i.aggregateChildGroups?i.compiledAccumulators[o].call(e,n.groups):i.compiledAccumulators[o].call(e,n.rows),e.storeResult(t);t.initialized=!0}function p(t){var e=H[t.level],n=new Slick.GroupTotals;n.group=t,t.totals=n,e.lazyTotalsCalculation||f(n)}function h(t,e){for(var n,i=H[e=e||0],r=i.collapsed,o=W[e],a=t.length;a--;)(n=t[a]).collapsed&&!i.aggregateCollapsed||(n.groups&&h(n.groups,e+1),i.aggregators.length&&(i.aggregateEmpty||n.rows.length||n.groups&&n.groups.length)&&p(n),n.collapsed=r^o[n.groupingKey],n.title=i.formatter?i.formatter(n):n.value)}function d(t,e){for(var n,i,r=H[e=e||0],o=[],a=0,l=0,s=t.length;l<s;l++){if(i=t[l],o[a++]=i,!i.collapsed)for(var u=0,g=(n=i.groups?d(i.groups,e+1):i.rows).length;u<g;u++)o[a++]=n[u];i.totals&&r.displayTotalsRow&&(!i.collapsed||r.aggregateCollapsed)&&(o[a++]=i.totals)}return o}function m(t){var e=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,n=t.toString().match(e);return{params:n[1].split(","),body:n[2]}}function v(t){var e=m(t.accumulate),n=new Function("_items","for (var "+e.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+e.params[0]+" = _items[_i]; "+e.body+"}");return n.displayName=n.name="compiledAccumulatorLoop",n}function _(){var t=m(P),e="{ _retval[_idx++] = $item$; continue _coreloop; }$1",n=t.body.replace(/return false\s*([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return!1([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|\}|$)/gi,e).replace(/return!0([;}]|\}|$)/gi,e).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),i=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");i=(i=(i=i.replace(/\$filter\$/gi,n)).replace(/\$item\$/gi,t.params[0])).replace(/\$args\$/gi,t.params[1]);var r=new Function("_items,_args",i);return r.displayName=r.name="compiledFilter",r}function w(){var t=m(P),e="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",n=t.body.replace(/return false\s*([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return!1([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|\}|$)/gi,e).replace(/return!0([;}]|\}|$)/gi,e).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),i=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");i=(i=(i=i.replace(/\$filter\$/gi,n)).replace(/\$item\$/gi,t.params[0])).replace(/\$args\$/gi,t.params[1]);var r=new Function("_items,_args,_cache",i);return r.displayName=r.name="compiledFilterWithCaching",r}function $(t,e){for(var n=[],i=0,r=0,o=t.length;r<o;r++)P(t[r],e)&&(n[i++]=t[r]);return n}function y(t,e,n){for(var i,r=[],o=0,a=0,l=t.length;a<l;a++)i=t[a],n[a]?r[o++]=i:P(i,e)&&(r[o++]=i,n[a]=!0);return r}function x(t){if(P){var n=e.inlineFilters?A:$,i=e.inlineFilters?F:y;O.isFilterNarrowing?q=n(q,b):O.isFilterExpanding?q=i(t,b,U):O.isFilterUnchanged||(q=n(t,b))}else q=X?t:t.concat();var r;return X?(q.length<=Y*X&&(Y=0===q.length?0:Math.floor((q.length-1)/X)),r=q.slice(X*Y,X*Y+X)):r=q,{totalRows:q.length,rows:r}}function C(t,e){var n,i,r,o=[],a=0,l=e.length;O&&O.ignoreDiffsBefore&&(a=Math.max(0,Math.min(e.length,O.ignoreDiffsBefore))),O&&O.ignoreDiffsAfter&&(l=Math.min(e.length,Math.max(0,O.ignoreDiffsAfter)));for(var s=a,u=t.length;s<l;s++)s>=u?o[o.length]=s:(n=e[s],i=t[s],(H.length&&(r=n.__nonDataRow||i.__nonDataRow)&&n.__group!==i.__group||n.__group&&!n.equals(i)||r&&(n.__groupTotals||i.__groupTotals)||n[T]!=i[T]||z&&z[n[T]])&&(o[o.length]=s));return o}function I(t){j=null,O.isFilterNarrowing==K.isFilterNarrowing&&O.isFilterExpanding==K.isFilterExpanding||(U=[]);var e=x(t);Z=e.totalRows;var n=e.rows;Q=[],H.length&&(Q=c(n)).length&&(h(Q),n=d(Q));var i=C(k,n);return k=n,i}function R(){if(!V){var t=k.length,e=Z,n=I(E,P);X&&Z<Y*X&&(Y=Math.max(0,Math.ceil(Z/X)-1),n=I(E,P)),z=null,K=O,O={},e!==Z&&nt.notify(r(),null,N),t!==k.length&&tt.notify({previous:t,current:k.length,dataView:N},null,N),n.length>0&&et.notify({rows:n,dataView:N},null,N)}}var S,M,b,A,F,N=this,G={groupItemMetadataProvider:null,inlineFilters:!1},T="id",E=[],k=[],D={},j=null,P=null,z=null,V=!1,B=!0,O={},K={},q=[],U=[],L={getter:null,formatter:null,comparer:function(t,e){return t.value===e.value?0:t.value>e.value?1:-1},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},H=[],Q=[],W=[],J=":|:",X=0,Y=0,Z=0,tt=new Slick.Event,et=new Slick.Event,nt=new Slick.Event;e=t.extend(!0,{},G,e),t.extend(this,{beginUpdate:function(){V=!0},endUpdate:function(){V=!1,R()},setPagingOptions:function(t){void 0!=t.pageSize&&(X=t.pageSize,Y=X?Math.min(Y,Math.max(0,Math.ceil(Z/X)-1)):0),void 0!=t.pageNum&&(Y=Math.min(t.pageNum,Math.max(0,Math.ceil(Z/X)-1))),nt.notify(r(),null,N),R()},getPagingInfo:r,getItems:function(){return E},setItems:function(t,e){void 0!==e&&(T=e),E=q=t,D={},n(),i(),R()},setFilter:function(t){P=t,e.inlineFilters&&(A=_(),F=w()),R()},sort:o,fastSort:a,reSort:function(){M?o(M,B):S&&a(S,B)},setGrouping:l,getGrouping:function(){return H},groupBy:function(t,e,n){l(null!=t?{getter:t,formatter:e,comparer:n}:[])},setAggregators:function(t,e){if(!H.length)throw new Error("At least one grouping must be specified before calling setAggregators().");H[0].aggregators=t,H[0].aggregateCollapsed=e,l(H)},collapseAllGroups:function(t){u(t,!0)},expandAllGroups:function(t){u(t,!1)},collapseGroup:function(t){var e=Array.prototype.slice.call(arguments),n=e[0];1==e.length&&-1!=n.indexOf(J)?g(n.split(J).length-1,n,!0):g(e.length-1,e.join(J),!0)},expandGroup:function(t){var e=Array.prototype.slice.call(arguments),n=e[0];1==e.length&&-1!=n.indexOf(J)?g(n.split(J).length-1,n,!1):g(e.length-1,e.join(J),!1)},getGroups:function(){return Q},getIdxById:function(t){return D[t]},getRowById:function(t){return s(),j[t]},getItemById:function(t){return E[D[t]]},getItemByIdx:function(t){return E[t]},mapRowsToIds:function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]<k.length&&(e[e.length]=k[t[n]][T]);return e},mapIdsToRows:function(t){var e=[];s();for(var n=0,i=t.length;n<i;n++){var r=j[t[n]];null!=r&&(e[e.length]=r)}return e},setRefreshHints:function(t){O=t},setFilterArgs:function(t){b=t},refresh:R,updateItem:function(t,e){if(void 0===D[t]||t!==e[T])throw"Invalid or non-matching id";E[D[t]]=e,z||(z={}),z[t]=!0,R()},insertItem:function(t,e){E.splice(t,0,e),n(t),R()},addItem:function(t){E.push(t),n(E.length-1),R()},deleteItem:function(t){var e=D[t];if(void 0===e)throw"Invalid id";delete D[t],E.splice(e,1),n(e),R()},syncGridSelection:function(e,n,i){function r(t){s.join(",")!=t.join(",")&&(s=t,u.notify({grid:e,ids:s,dataView:l},new Slick.EventData,l))}function o(){if(s.length>0){a=!0;var t=l.mapIdsToRows(s);n||r(l.mapRowsToIds(t)),e.setSelectedRows(t),a=!1}}var a,l=this,s=l.mapRowsToIds(e.getSelectedRows()),u=new Slick.Event;return e.onSelectedRowsChanged.subscribe(function(n,o){if(!a){var u=l.mapRowsToIds(e.getSelectedRows());r(i&&e.getOptions().multiSelect?t.grep(s,function(t){return void 0===l.getRowById(t)}).concat(u):u)}}),this.onRowsChanged.subscribe(o),this.onRowCountChanged.subscribe(o),u},syncGridCellCssStyles:function(t,e){function n(t){r={};for(var e in t){var n=k[e][T];r[n]=t[e]}}function i(){if(r){o=!0,s();var n={};for(var i in r){var a=j[i];void 0!=a&&(n[a]=r[i])}t.setCellCssStyles(e,n),o=!1}}var r,o;n(t.getCellCssStyles(e)),t.onCellCssStylesChanged.subscribe(function(t,i){o||e==i.key&&i.hash&&n(i.hash)}),this.onRowsChanged.subscribe(i),this.onRowCountChanged.subscribe(i)},getLength:function(){return k.length},getItem:function(t){var e=k[t];if(e&&e.__group&&e.totals&&!e.totals.initialized){var n=H[e.level];n.displayTotalsRow||(f(e.totals),e.title=n.formatter?n.formatter(e):e.value)}else e&&e.__groupTotals&&!e.initialized&&f(e);return e},getItemMetadata:function(t){var n=k[t];return void 0===n?null:n.__group?e.groupItemMetadataProvider.getGroupRowMetadata(n):n.__groupTotals?e.groupItemMetadataProvider.getTotalsRowMetadata(n):null},onRowCountChanged:tt,onRowsChanged:et,onPagingInfoChanged:nt})}function n(t){this.field_=t,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(t){var e=t[this.field_];this.count_++,null==e||""===e||isNaN(e)||(this.nonNullCount_++,this.sum_+=parseFloat(e))},this.storeResult=function(t){t.avg||(t.avg={}),0!=this.nonNullCount_&&(t.avg[this.field_]=this.sum_/this.nonNullCount_)}}function i(t){this.field_=t,this.init=function(){this.min_=null},this.accumulate=function(t){var e=t[this.field_];null==e||""===e||isNaN(e)||(null==this.min_||e<this.min_)&&(this.min_=e)},this.storeResult=function(t){t.min||(t.min={}),t.min[this.field_]=this.min_}}function r(t){this.field_=t,this.init=function(){this.max_=null},this.accumulate=function(t){var e=t[this.field_];null==e||""===e||isNaN(e)||(null==this.max_||e>this.max_)&&(this.max_=e)},this.storeResult=function(t){t.max||(t.max={}),t.max[this.field_]=this.max_}}function o(t){this.field_=t,this.init=function(){this.sum_=null},this.accumulate=function(t){var e=t[this.field_];null==e||""===e||isNaN(e)||(this.sum_+=parseFloat(e))},this.storeResult=function(t){t.sum||(t.sum={}),t.sum[this.field_]=this.sum_}}module.exports={DataView:e,Aggregators:{Avg:n,Min:i,Max:r,Sum:o}},t.extend(!0,window,{Slick:{Data:{DataView:e,Aggregators:{Avg:n,Min:i,Max:r,Sum:o}}}})}(jQuery);