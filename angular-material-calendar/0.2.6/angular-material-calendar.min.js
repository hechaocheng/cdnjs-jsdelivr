angular.module("materialCalendar",["ngMaterial","ngSanitize"]),angular.module("materialCalendar").filter("dateToGmt",function(){return function(e){return e=e||new Date,new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}}),angular.module("materialCalendar").service("Calendar",["$filter",function(l){return function(e,a,t){var n=l("dateToGmt")();this.getNumDays=function(){return l("dateToGmt")(new Date(this.start.getYear(),this.start.getMonth(),0)).getDate()},this.setWeekStartsOn=function(e){var a=parseInt(e||0,10);return this.weekStartsOn=!isNaN(a)&&0<=a&&a<=6?a:0,this.weekStartsOn},this.options=angular.isObject(t)?t:{},this.year=n.getFullYear(),this.month=n.getMonth(),this.dates=[],this.weekStartsOn=this.setWeekStartsOn(this.options.weekStartsOn),this.getFirstDayOfCalendar=function(){var e=this.start,a=new Date(e.getFullYear(),e.getMonth(),1);return a.getDay()!==this.weekStartsOn&&(a.setDate(a.getDate()-a.getDay()+this.weekStartsOn),1<a.getDate()&&a.getDate()<7&&a.setDate(a.getDate()-7)),a},this.next=function(){this.init(this.year,this.month+1)},this.prev=function(){this.init(this.year,this.month-1)},this._isFirstDayOfWeek=function(e){return!e.getDay()},this.init=function(e,a){e&&(a?(this.year=e,this.month=a):(this.year=e-1,this.month=11)),this.start=l("dateToGmt")(new Date(this.year,this.month,1,0,0)),this.dates=[],this.weeks=[],this.year=this.start.getFullYear(),this.month=this.start.getMonth();for(var t,n=this.getFirstDayOfCalendar(),r=0,d=1==n.getDate()&&28==this.getNumDays()?28:42;r<d&&(t=l("dateToGmt")(new Date(n.valueOf()+864e5*r)),r%7==0&&this.weeks.push([]),!(1<this.weeks.length)||this.weeks[this.weeks.length-1].length||t.getMonth()===this.month);r++)this.dates.push(t),this.weeks[this.weeks.length-1].push(t);return this.dates},this.init(e,a)}}]),angular.module("materialCalendar").directive("calendarMd",["$compile","$parse","$http","$q","$filter","Calendar",function(h,u,y,g,p,w){var f;return{restrict:"E",scope:{ngModel:"=?",template:"&",templateUrl:"=?",onDayClick:"=?",onPrevMonth:"=?",onNextMonth:"=?",calendarDirection:"=?",dayContent:"=?",timezone:"=?",titleFormat:"=?",dayFormat:"=?",dayLabelFormat:"=?",dayLabelTooltipFormat:"=?",dayTooltipFormat:"=?",weekStartsOn:"=?"},link:function(t,a,n){var e,r;f||(e=document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css",r.id="calendarMdCss",r.innerHTML="calendar-md .calendar-md-subheader,calendar-md .calendar-md-week.horizontal .calendar-md-day:first-child,calendar-md .calendar-md-week.vertical,calendar-md .md-subheader{border-left:1px solid rgba(0,0,0,.12)}calendar-md{display:block;max-height:100%}calendar-md .calendar-md-subheader{min-height:36px;border-right:1px solid rgba(0,0,0,.12)}calendar-md .calendar-md-day{border-bottom:1px solid rgba(0,0,0,.12);border-right:1px solid rgba(0,0,0,.12);padding:6px;box-sizing:border-box}calendar-md .calendar-md-day,calendar-md .calendar-md-subheader-day{overflow-x:hidden;text-overflow:ellipsis}calendar-md .calendar-md-month:first-child .calendar-md-day,calendar-md .calendar-md-week:first-child{border-top:1px solid rgba(0,0,0,.12)}calendar-md .calendar-md-day:not(.calendar-md-day-inactive){cursor:pointer}calendar-md .calendar-md-day-inactive{color:rgba(0,0,0,.3);pointer-events:none}calendar-md .calendar-md-day-inactive .calendar-md-number{color:inherit}calendar-md .md-subheader{border-right:1px solid rgba(0,0,0,.12);margin-right:0}calendar-md .calendar-md-day.active{background-color:rgba(0,0,0,.06)}calendar-md .md-subheader:not(.md-sticky-no-effect):after{right:0!important}calendar-md .calendar-md-week.vertical .calendar-md-number{padding:12px;width:200px;text-align:right;color:rgba(0,0,0,.75);font-weight:100;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap}calendar-md .calendar-md-day:hover{background:rgba(0,0,0,.04)}calendar-md .calendar-md-number{padding:0}@media (max-width:599px){calendar-md .calendar-md-week.vertical .calendar-md-number{width:auto;text-align:left;padding-left:0}}",e.insertBefore(r,e.firstChild),f=!0);var d=new Date,l=parseInt(n.startMonth||d.getMonth()),o=parseInt(n.startYear||d.getFullYear());t.columnWeekLayout="column",t.weekLayout="row",t.timezone=t.timezone||null,t.titleFormat=t.titleFormat||"MMMM yyyy",t.dayLabelFormat=t.dayLabelFormat||"EEE",t.dayLabelTooltipFormat=t.dayLabelTooltipFormat||"EEEE",t.dayFormat=t.dayFormat||"d",t.dayTooltipFormat=t.dayTooltipFormat||"fullDate",t.getDayContent=t.dayContent||angular.noop,t.sameMonth=function(e){var a=p("dateToGmt")(e);return a.getFullYear()===t.calendar.year&&a.getMonth()===t.calendar.month},t.calendarDirection=t.calendarDirection||"horizontal",t.$watch("calendarDirection",function(e){t.weekLayout="horizontal"===e?"row":"column"}),t.$watch("weekLayout",function(){o=t.calendar.year,l=t.calendar.month,m()});function i(e,a){(e||angular.noop)(a)}t.prev=function(){t.calendar.prev();var e={year:t.calendar.year,month:t.calendar.month+1};i(t.onPrevMonth,e)},t.next=function(){t.calendar.next();var e={year:t.calendar.year,month:t.calendar.month+1};i(t.onNextMonth,e)},t.handleDayClick=function(e){t.active=e,n.ngModel&&u(n.ngModel).assign(t.$parent,e),i(t.onDayClick,e)};function s(e){a.html(e),h(a.contents())(t)}function c(){t.calendar=new w(o,l,{weekStartsOn:t.weekStartsOn||0});var e=g.defer();return t.templateUrl?y.get(t.templateUrl).success(e.resolve).error(e.reject):e.resolve(t.template()||"<md-content class='calendar-md' layout='column' layout-fill flex md-swipe-left='next()' md-swipe-right='prev()'><md-toolbar><div class='md-toolbar-tools' layout='row'><md-button class='calendar-md-prev-btn' ng-click='prev()'>&laquo;</md-button><div flex></div><h2 class='calendar-md-title'><span>{{ calendar.start | date:titleFormat:timezone }}</span></h2><div flex></div><md-button class='calendar-md-next-btn' ng-click='next()'>&raquo;</md-button></div></md-toolbar><md-content flex layout='column' layout-fill><div class='calendar-md-subheader' layout='row' layout-fill layout-padding layout-align='space-between center' ng-hide='weekLayout == &quot;column&quot;'><div class='calendar-md-subheader-day' flex ng-repeat='day in calendar.weeks[0]'><md-tooltip>{{ ::day | date:dayLabelTooltipFormat:timezone }}</md-tooltip>{{ ::day | date:dayLabelFormat:timezone }}</div></div><div flex class='calendar-md-month' layout='column'><div flex class='calendar-md-week' ng-if='week.length' ng-class='calendarDirection' data-week-layout='{{ weekLayout }}' layout='{{ weekLayout }}' ng-repeat='week in calendar.weeks track by $index'><div class='calendar-md-day' ng-hide='! sameMonth(day) && weekLayout == columnWeekLayout' ng-class='{&quot;calendar-md-day-inactive&quot; : ! sameMonth(day), active: active === day }' flex-gt-sm layout='row' layout-sm='column' layout-fill ng-click='handleDayClick(day)' ng-repeat='day in week' ng-class='{ active: active === day }'><md-tooltip>{{ ::day | date:dayTooltipFormat:timezone }}</md-tooltip><div class='calendar-md-number'>{{ ::day | date:dayFormat:timezone }}</div><div class='calendar-md-content' flex ng-bind-html='getDayContent(day)'></div></div></div></div></md-content></md-content>"),e.promise}var m=function(){c().then(s)};t.$watch("weekStartsOn",c),m(),t._$$init=c,t._$$setTemplate=s,t._$$bootstrap=m}}}]);