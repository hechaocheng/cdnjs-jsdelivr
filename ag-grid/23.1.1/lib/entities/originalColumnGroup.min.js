"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var columnGroup_1=require("./columnGroup"),column_1=require("./column"),eventService_1=require("../eventService"),OriginalColumnGroup=function(){function a(e,n,t,o){this.localEventService=new eventService_1.EventService,this.expandable=!1,this.colGroupDef=e,this.groupId=n,this.expanded=e&&!!e.openByDefault,this.padding=t,this.level=o}return a.prototype.setOriginalParent=function(e){this.originalParent=this.originalParent},a.prototype.getOriginalParent=function(){return this.originalParent},a.prototype.getLevel=function(){return this.level},a.prototype.isVisible=function(){return!!this.children&&this.children.some(function(e){return e.isVisible()})},a.prototype.isPadding=function(){return this.padding},a.prototype.setExpanded=function(e){this.expanded=void 0!==e&&e;var n={type:a.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(n)},a.prototype.isExpandable=function(){return this.expandable},a.prototype.isExpanded=function(){return this.expanded},a.prototype.getGroupId=function(){return this.groupId},a.prototype.getId=function(){return this.getGroupId()},a.prototype.setChildren=function(e){this.children=e},a.prototype.getChildren=function(){return this.children},a.prototype.getColGroupDef=function(){return this.colGroupDef},a.prototype.getLeafColumns=function(){var e=[];return this.addLeafColumns(e),e},a.prototype.addLeafColumns=function(n){this.children&&this.children.forEach(function(e){e instanceof column_1.Column?n.push(e):e instanceof a&&e.addLeafColumns(n)})},a.prototype.getColumnGroupShow=function(){return this.padding?columnGroup_1.ColumnGroup.HEADER_GROUP_PADDING:this.colGroupDef.columnGroupShow},a.prototype.setupExpandable=function(){var n=this;this.setExpandable(),this.getLeafColumns().forEach(function(e){return e.addEventListener(column_1.Column.EVENT_VISIBLE_CHANGED,n.onColumnVisibilityChanged.bind(n))})},a.prototype.setExpandable=function(){if(!this.isPadding()){for(var e=!1,n=!1,t=!1,o=this.findChildren(),i=0,r=o.length;i<r;i++){var u,p=o[i];p.isVisible()&&((u=p.getColumnGroupShow())===columnGroup_1.ColumnGroup.HEADER_GROUP_SHOW_OPEN?t=e=!0:u===columnGroup_1.ColumnGroup.HEADER_GROUP_SHOW_CLOSED?t=n=!0:(n=e=!0,u===columnGroup_1.ColumnGroup.HEADER_GROUP_PADDING&&(t=p.children.some(function(e){return void 0!==e.getColumnGroupShow()}))))}var l,s=e&&n&&t;this.expandable!==s&&(this.expandable=s,l={type:a.EVENT_EXPANDABLE_CHANGED},this.localEventService.dispatchEvent(l))}},a.prototype.findChildren=function(){var e=this.children,n=e[0];if(n&&(!n.isPadding||!n.isPadding()))return e;for(;1===e.length&&e[0]instanceof a;)e=e[0].children;return e},a.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},a.prototype.addEventListener=function(e,n){this.localEventService.addEventListener(e,n)},a.prototype.removeEventListener=function(e,n){this.localEventService.removeEventListener(e,n)},a.EVENT_EXPANDED_CHANGED="expandedChanged",a.EVENT_EXPANDABLE_CHANGED="expandableChanged",a}();exports.OriginalColumnGroup=OriginalColumnGroup;