{"version":3,"sources":["moveColumnController.js"],"names":["__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","exports","value","context_1","require","logger_1","columnController_1","column_1","utils_1","dragAndDropService_1","gridOptionsWrapper_1","MoveColumnController","pinned","eContainer","needToMoveLeft","needToMoveRight","centerContainer","_","exists","prototype","registerGridComp","gridPanel","init","logger","loggerFactory","create","getIconName","DragAndDropService","ICON_PINNED","ICON_MOVE","onDragEnter","draggingEvent","visibleState_1","visibleColumns","columns","dragItem","dragSource","type","DragSourceType","ToolPanel","setColumnsVisible","visibleState","filter","column","getId","setColumnsPinned","onDragging","onDragLeave","gridOptionsWrapper","isSuppressDragLeaveHidesColumns","fromNudge","dragItemCallback","ensureIntervalCleared","visible","source","allowedCols","getColDef","lockVisible","columnController","lockPinned","onDragStop","normaliseX","x","isEnableRtl","clientWidth","getCenterViewportScrollLeft","checkCenterForScrolling","xAdjustedForScroll","firstVisiblePixel","lastVisiblePixel","getCenterWidth","ensureIntervalStarted","fromEnter","mouseXNormalised","hDirectionNormalised","dragSourceType","columnsToMove","_this","lastDraggingEvent","missing","hDirection","normaliseDirection","col","getPinned","attemptMoveColumns","HDirection","Left","Right","console","error","calculateOldIndex","movingCols","gridCols","getAllGridColumns","indexes","forEach","push","indexOf","sortNumberArray","firstIndex","last","allMovingColumns","mouseX","draggingLeft","draggingRight","validMoves","calculateValidMoves","oldIndex","firstValidMove","constrainDirection","HeaderCell","move","doesMovePassRules","moveColumns","colIsNotMovingFunc","widthOfMovingDisplayedCols_1","leftColumn","allDisplayedCols","getDisplayedColumns","allGridCols","movingDisplayedCols","otherDisplayedCols","otherGridCols","displayIndex","availableWidth","getActualWidth","pointer","lastIndex","displacedCol","isColumnHidden","displayedColumns","movingIntervalId","intervalCount","failedMoveAttempts","window","setInterval","moveInterval","bind","dragAndDropService","setGhostIcon","ICON_LEFT","ICON_RIGHT","clearInterval","pixelsToMove","pixelsMoved","columnsThatCanPin","pinType","scrollHorizontally","Column","PINNED_LEFT","PINNED_RIGHT","nudge","Autowired","LoggerFactory","ColumnController","GridOptionsWrapper","PostConstruct","Function"],"mappings":"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"}