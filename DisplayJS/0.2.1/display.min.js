"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),DisplayJS=function(){function DisplayJS(e){_classCallCheck(this,DisplayJS),this.obj=e}return _createClass(DisplayJS,[{key:"var",value:function(e){var t=this,n=function(){t.if(),t.else();for(var e=document.querySelectorAll("[var]"),n=0;n<e.length;n++){var r=e[n].getAttribute("var");e[n].innerHTML=t.obj[r]}};e?1==e?(n(),this.live(this.obj,function(){n()})):window.setInterval(function(){n()},e):n()}},{key:"xss",value:function(e){return e.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")}},{key:"xssURI",value:function(e){return encodeURI(e)}},{key:"target",value:function(e){e=e||function(){this.var()};var t=function(){return document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)}}(),n=this.obj;[].forEach.call(document.querySelectorAll("[target]"),function(r,i,o){t(o[i],"change",function(){var t=o[i].getAttribute("target");"checkbox"==this.type?n[t]=this.checked:n[t]=this.value,e()}),t(o[i],"keydown",function(){var t=o[i].getAttribute("target");"checkbox"==this.type?n[t]=this.checked:n[t]=this.value,e()}),t(o[i],"input",function(){var t=o[i].getAttribute("target");"checkbox"==this.type?n[t]=this.checked:n[t]=this.value,e()}),t(o[i],"paste",function(){var t=o[i].getAttribute("target");"checkbox"==this.type?n[t]=this.checked:n[t]=this.value,e()})})}},{key:"if",value:function _if(push){var _this2=this,if_push=function if_push(){for(var elements=document.querySelectorAll("[if]"),i=0;i<elements.length;i++){var attr=elements[i].getAttribute("if"),el=[];el.push(elements[i]),eval(_this2.obj[attr])?_this2.show(el):_this2.hide(el)}};push?1==push?(if_push(),this.live(this.obj,function(){if_push()})):window.setInterval(function(){if_push()},push):if_push()}},{key:"else",value:function _else(push){var _this3=this,else_push=function else_push(){for(var elements=document.querySelectorAll("[else]"),i=0;i<elements.length;i++){var attr=elements[i].getAttribute("else"),el=[];el.push(elements[i]),eval(_this3.obj[attr])?_this3.hide(el):_this3.show(el)}};push?1==push?(else_push(),this.live(this.obj,function(){else_push()})):window.setInterval(function(){else_push()},push):else_push()}},{key:"repeat",value:function(e,t,n,r,i){r=r||"",i=i||"";for(var o=r,u=0;u<t.length;u++)o+=n+String(t[u]);o+=i,e[0].innerHTML=o}},{key:"custom",value:function(e,t){var n=this,r=function(){for(var t=document.querySelectorAll("["+e+"]"),r=0;r<t.length;r++){var i=t[r].getAttribute(e);t[r].innerHTML=n.obj[i]}};t?1==t?(r(),this.live(this.obj,function(){r()})):window.setInterval(function(){r()},t):r()}},{key:"live",value:function(e,t){({watch:function(e,t,n){if(void 0===Object.getOwnPropertyDescriptor(e,t))throw new Error("Invalid descriptor for property: "+t+", object: "+e);if("function"!=typeof n)throw new Error("Invalid onPropertyChange handler: "+n);var r=e[t];Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return r},set:function(i){if(i!==r)return n(e,t,i,r),r=i}})},watchAll:function(e,t){if("function"!=typeof t)throw new Error("Invalid onPropertyChange handler: "+t);for(var n in e)this.watch(e,n,t)}}).watchAll(e,function(e,n,r,i){t(e,n,r,i)})}},{key:"onEvent",value:function onEvent(){for(var elements=document.querySelectorAll("[on]"),i=0;i<elements.length;i++){var attr=elements[i].getAttribute("on"),action=elements[i].getAttribute("action");elements[i].addEventListener(attr,eval(action))}}},{key:"all",value:function(e,t){e.forEach(function(e){var n=[];n.push(e),t(n)})}},{key:"text",value:function(e,t){e[0].innerHTML=this.xss(t)}},{key:"html",value:function(e,t){e[0].innerHTML=t}},{key:"prepend",value:function(e,t){var n=document.createElement("div");n.innerHTML=t,e[0].insertBefore(n,e.firstChild)}},{key:"append",value:function(e,t){e[0].innerHTML+=t}},{key:"after",value:function(e,t){e[0].insertAdjacentHTML("afterend",t)}},{key:"before",value:function(e,t){e[0].insertAdjacentHTML("beforebegin",t)}},{key:"clone",value:function(e){e[0].cloneNode(!0)}},{key:"is",value:function(e,t){return e===t}},{key:"select",value:function(e){return document.querySelectorAll(e)}},{key:"single",value:function(e){var t=document.querySelectorAll(e),n=[];return n.push(t[0]),n}},{key:"empty",value:function(e){e[0].innerHTML=null}},{key:"valEmpty",value:function(e){e[0].value=null}},{key:"remove",value:function(e){e[0].parentNode.removeChild(e)}},{key:"on",value:function(e,t,n){e[0].addEventListener(t,n)}},{key:"show",value:function(e){return e[0].style.display="block",!0}},{key:"hide",value:function(e){return e[0].style.display="none",!0}},{key:"style",value:function(e,t,n){e[0].style[t]=n}},{key:"ajax",value:function(e,t,n,r,i){var o=new XMLHttpRequest;o.open(t,e,!0),i&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){if(o.status>=200&&o.status<400){var e=o.responseText;r(e)}else console.error("DisplayJS error: The ajax request returned an error.")},o.onerror=function(){console.error("DisplayJS error: The ajax request returned an error.")},o.send(n)}},{key:"hasClass",value:function(e,t){return e[0].classList?e[0].classList.contains(t):!!e[0].className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},{key:"addClass",value:function(e,t){e[0].classList?e[0].classList.add(t):this.hasClass(e,t)||(e[0].className+=" "+t)}},{key:"removeClass",value:function(e,t){if(e[0].classList)e[0].classList.remove(t);else if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e[0].className=e[0].className.replace(n," ")}}},{key:"toggleClass",value:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)}},{key:"each",value:function(e,t){for(var n=0;n<e.length;n++)t(e[n])}},{key:"css",value:function(e,t,n){e[0].style[t]=n}},{key:"getStyle",value:function(e,t){return e[0].style[t]}},{key:"fadeOut",value:function(e,t){t=t||.1;var n=e[0];n.style.opacity=1,function e(){(n.style.opacity-=t)<0?n.style.display="none":requestAnimationFrame(e)}()}},{key:"fadeIn",value:function(e,t,n){t=t||.1;var r=e[0];r.style.opacity=0,r.style.display=n||"block",function e(){var n=parseFloat(r.style.opacity);(n+=t)>1||(r.style.opacity=n,requestAnimationFrame(e))}()}},{key:"extend",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}},{key:"arange",value:function(e,t,n,r){var i=(Math.abs(t-e)+2*(r||0))/(n||1)+1,o=e<t?1:-1,u=e-o*(r||0),a=o*(n||1);return Array(i).fill(0).map(function(e,t){return u+a*t})}},{key:"range",value:function(e){return this.arange(0,e,1)}},{key:"linespace",value:function(e,t,n){var r=t-e,i=r/n;return this.arange(e,t,i)}},{key:"forIn",value:function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n])}},{key:"reshape",value:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},{key:"apply",value:function(e,t){this.forIn(e,function(e){return t(e)})}},{key:"sum",value:function(e){return e.reduce(function(e,t){return e+t},0)}},{key:"multiply",value:function(e){return e.reduce(function(e,t){return e*t},0)}},{key:"flatten",value:function(e){return e.reduce(function(e,t){return e.concat(t)},[])}},{key:"drop",value:function(e,t){return t>0?e.slice(t,e.length):e.slice(0,e.length-t)}},{key:"isIn",value:function(e,t){return e.indexOf(t)>-1}},{key:"rmFromArray",value:function(e,t){var n=[];this.forIn(e,function(r){return t(r)||n.push(e[r]),n})}}]),DisplayJS}(),_DOM_DJS=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),t}(DisplayJS);