!function(){"use strict";function e(m){return{restrict:"A",scope:{ezpModel:"=",ezpOptions:"=",onComplete:"=ezpOnComplete",onDestroy:"=ezpOnDestroy",onImageClick:"=ezpOnImageClick",onImageSwap:"=ezpOnImageSwap",onImageSwapComplete:"=ezpOnImageSwapComplete",onShow:"=ezpOnShow",onZoomedImageLoaded:"=ezpOnZoomedImageLoaded"},link:e};function e(a,r,e){var u,t=!1,i=null,l={},d={onComplete:function(){a.onComplete&&a.onComplete()&&a.onComplete()()},onDestroy:function(){a.onDestroy&&a.onDestroy()&&a.onDestroy()()},onImageClick:function(){a.onImageClick&&a.onImageClick()&&a.onImageClick()()},onImageSwap:function(){a.onImageSwap&&a.onImageSwap()&&a.onImageSwap()()},onImageSwapComplete:function(){a.onImageSwapComplete&&a.onImageSwapComplete()&&a.onImageSwapComplete()()},onShow:function(){a.onShow&&a.onShow()&&a.onShow()()},onZoomedImageLoaded:function(){a.onZoomedImageLoaded&&a.onZoomedImageLoaded()&&a.onZoomedImageLoaded()()}};function c(e,o){var n=angular.element(e).ezPlus(o);return(i=n&&0<n.length?g(n[0]):null)&&(l[i.options.zoomId]=!0),i}function g(e){return angular.element(e||r).data("ezPlus")}function s(){var e=g();e&&e.showHideZoomContainer("hide")}function w(){var e=g();e&&e.showHideZoomContainer("show")}a.ezpOptions&&angular.extend(d,a.ezpOptions),d.appendto&&(d.zoomContainerAppendTo=d.appendto),d.loader&&(u=d.loader),a.$on("ezp-hidesAll",function(e,o){s()}),a.$on("ezp-showAll",function(e,o){w()}),a.$on("ezp-disableZoom",function(e,o){var n=g();n&&n.changeState("disable")}),a.$on("ezp-enableZoom",function(e,o){var n=g();n&&n.changeState("enable")}),a.$watch("ezpOptions",function(e,o){if(t){var n=g();n.destroy(),angular.extend(d,a.ezpOptions),n&&c(r,d)}else t=!0},!0),a.$watch("ezpModel",function(e,o){var n=e,a=n&&n.thumb||"",t=n&&n.small||"",i=n&&n.large||"",l=null,m=g();function p(e,o){var n=o;return"thumb"===e.initial?n=a:"small"===e.initial?n=t:"large"===e.initial&&(n=i),n}m?n?(s(),u&&m.swaptheimage(u,u),l=p(d,t),m.swaptheimage(l,i),w()):m.closeAll():n&&((l=p(d))&&r.attr("src",l),r.attr("data-zoom-image",i),c(r,d))}),a.$on("$destroy",function(){var e=g();e&&e.destroy();for(var o in l)if(l.hasOwnProperty(o)){var n=(a=o,angular.element(m).find("[uuid="+a+"]"));n.remove()}var a;l={}})}}angular.module("ezplus",[]).directive("ezPlus",e),e.$inject=["$document"]}();